OpenAI Codex v0.99.0 (research preview)
--------
workdir: /Users/kanggyeonggu/Documents/league-of-algologic
model: gpt-5.3-codex
provider: openai
approval: never
sandbox: workspace-write [workdir, /tmp, $TMPDIR]
reasoning effort: xhigh
reasoning summaries: auto
session id: 019c51c8-85cc-74b0-a733-48f612a4de64
--------
user
You are a specialized SSOT audit worker.

Mission:
- Agent ID: duplication-auditor
- Task ID: DUP-NORMATIVE
- Target Kind: duplication
- Target ID: NORMATIVE_DUPLICATION
- Objective: Find duplicated or conflicting normative rules across SSOT areas.

Execution Rules:
- Audit only the provided scope paths.
- Do not modify or create repository files.
- Use shell read commands as needed to inspect markdown and agent files.
- When evidence exists, provide precise file paths and optional line numbers.
- If no issue is found, return an empty findings array and status pass.

Severity Policy:
- critical: missing mandatory references or hard SSOT violations
- high: mapping/wiring mismatch causing incorrect orchestration
- medium: relationship drift, weak traceability, or ambiguous ownership
- low: minor documentation quality concerns

Output Contract:
- Return ONLY a JSON object matching the provided output schema.
- No markdown fences, no commentary, no prose outside JSON.

Worker Request JSON:
{
  "run_id": "20260212-211025",
  "agent_id": "duplication-auditor",
  "task_id": "DUP-NORMATIVE",
  "repo_root": "/Users/kanggyeonggu/Documents/league-of-algologic",
  "mode": "full",
  "changed_files": [],
  "target": {
    "kind": "duplication",
    "id": "NORMATIVE_DUPLICATION",
    "scope_paths": [
      "01_PRODUCT",
      "02_DESIGN",
      "03_API",
      "04_DOMAIN",
      "05_FRONTEND",
      "06_BACKEND"
    ],
    "checks": [
      "duplicate_normative_statements",
      "conflicting_normative_statements"
    ],
    "objective": "Find duplicated or conflicting normative rules across SSOT areas."
  },
  "severity_policy": {
    "fail_on": "high"
  },
  "output_path": "/Users/kanggyeonggu/Documents/league-of-algologic/AGENTS/CODEX/reports/ssot-spec-audit/20260212-211025/worker_results/DUP-NORMATIVE.worker.json"
}
mcp startup: no servers
2026-02-12T12:17:01.927276Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-d0d7-7c01-9d9a-03891d2c6d05
2026-02-12T12:17:01.952332Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-9887-76b1-8a51-bcf3d924cc4c
2026-02-12T12:17:01.975805Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-38ee-7ba2-a962-612dc878cb48
2026-02-12T12:17:02.000858Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-467c-72d3-a3b1-d7a5a430ccef
2026-02-12T12:17:02.023658Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-cc9d-7a62-9a23-c4a89638f2aa
2026-02-12T12:17:02.048860Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-ce91-7eb1-b1ba-acb58528a4c4
2026-02-12T12:17:02.073944Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-38ea-72b0-bdf8-e40ebceaa511
2026-02-12T12:17:02.099040Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-cc9e-7251-bef6-72ab459d6295
2026-02-12T12:17:02.124166Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-f756-70d0-979e-f3d19e6b4765
2026-02-12T12:17:02.147692Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-f6e8-7312-87a5-1bf02f68e683
2026-02-12T12:17:02.172842Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4876-72e1-8344-2def65ab0e2e
2026-02-12T12:17:02.198009Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-48b9-7cf0-bb8f-0727ecae471c
2026-02-12T12:17:02.223256Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4930-7b12-b5a6-09a3f990fa01
2026-02-12T12:17:02.248563Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-38ea-7463-ae40-c7cb687f7c1e
2026-02-12T12:17:02.272973Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-fa75-7c02-93b7-0ff3016651ff
2026-02-12T12:17:02.297683Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-cc9e-7160-86f1-edd523e80eda
2026-02-12T12:17:02.322789Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-d227-7931-8880-0db3cd452657
2026-02-12T12:17:02.347912Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c6-c7d0-7983-a4d7-732cf9ac4887
2026-02-12T12:17:02.372985Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4893-7892-ab52-2b5e47dc4b6a
2026-02-12T12:17:02.396685Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-38ea-77e0-959f-41e255a92e73
2026-02-12T12:17:02.421795Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-f78e-7f63-8b6a-6989a20dbee4
2026-02-12T12:17:02.445081Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-cc9c-7ae3-b325-a3e92ca31ab8
2026-02-12T12:17:02.470244Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-f858-7832-915b-32b1bbc4a668
2026-02-12T12:17:02.493612Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4889-7083-a7bb-3036c26e479e
2026-02-12T12:17:02.516596Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4ad5-7921-bbb9-6d8219c8e00f
2026-02-12T12:17:02.539417Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-ceef-7700-964a-e875524422b3
2026-02-12T12:17:02.562760Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-ce91-70c0-81cc-845a16dc3090
2026-02-12T12:17:02.587043Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-467b-7a32-a5aa-cc1b16737fd3
2026-02-12T12:17:02.613471Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-d087-7b72-810f-c7f9cae8997e
2026-02-12T12:17:02.637582Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-d12a-7c03-ae0e-de466063265b
2026-02-12T12:17:02.662704Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-cf47-78d1-bfd8-856010e0b88b
2026-02-12T12:17:02.687564Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-f72e-7832-829c-5dc1786d64e1
2026-02-12T12:17:02.711710Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-467e-73d0-b85f-f37742148125
2026-02-12T12:17:02.738735Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-3937-76b2-a6cc-f97d68083e72
2026-02-12T12:17:02.765587Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-467c-7e83-8a93-8be1e16e8d6f
2026-02-12T12:17:02.791851Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4bef-7ed0-8cba-d1ace7970ba2
2026-02-12T12:17:02.819623Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c7-bffd-7e91-9006-22e637fd445b
2026-02-12T12:17:02.845764Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-97ee-7b60-b23e-e08772246435
2026-02-12T12:17:02.870305Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-cefd-7d71-8e38-596fba5ee0fa
2026-02-12T12:17:02.896890Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4a5a-7433-8dd2-1a6692ba5030
2026-02-12T12:17:02.922278Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c5-b800-79c0-ac34-e82f05164e2a
2026-02-12T12:17:02.948853Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-995e-7492-8c9d-07b4d289699a
2026-02-12T12:17:02.975830Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4be1-7322-a4ca-af563f4648a1
2026-02-12T12:17:03.001232Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4b44-7932-b08e-3d01c68ac40d
2026-02-12T12:17:03.026335Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51bd-0e3d-7023-859d-48e6711a7edc
2026-02-12T12:17:03.053398Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c5-db3b-75a1-bc22-880a2374c69a
2026-02-12T12:17:03.078528Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-97fe-7fb3-96d8-40e3f7846860
2026-02-12T12:17:03.103616Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-ce91-71c2-ab93-0e7477f1db36
2026-02-12T12:17:03.128744Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-38ea-7343-9ed5-7e439c2f4971
2026-02-12T12:17:03.153357Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-d111-7f32-ba2e-7fb437b66b8d
2026-02-12T12:17:03.180031Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-d2a5-77d0-814d-abc1f8cc15cd
2026-02-12T12:17:03.206633Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-d199-7bc1-8e8d-c5388afdccf8
2026-02-12T12:17:03.231600Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-cca6-7652-95a9-9848df23bbf0
2026-02-12T12:17:03.256227Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-492a-7c30-9fcd-1011dc30505a
2026-02-12T12:17:03.280850Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c7-bea2-7832-a4a2-7dd8098fd672
2026-02-12T12:17:03.304390Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-99a4-75f0-9861-0af58a0c2eb0
2026-02-12T12:17:03.328441Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-467e-7bc1-8c89-68dc759750a4
2026-02-12T12:17:03.354767Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-96ff-7c81-a003-23d93283cfcb
2026-02-12T12:17:03.379096Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4a44-73b3-8ed5-d69e2b402611
2026-02-12T12:17:03.405357Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51bf-5589-7183-8f76-bb3c1765fbff
2026-02-12T12:17:03.432076Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4a98-7dc1-801f-3d18906a496d
2026-02-12T12:17:03.459205Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-cc9c-7002-91ff-96e6baf61715
2026-02-12T12:17:03.486266Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-467b-71d0-b19c-c6ecbac8a9b5

thinking
**Planning SSOT audit scanning**
codex
{"run_id":"20260212-211025","agent_id":"duplication-auditor","task_id":"DUP-NORMATIVE","target":{"kind":"duplication","id":"NORMATIVE_DUPLICATION"},"status":"warn","summary":"Starting audit over 01_PRODUCT–06_BACKEND. I’ll enumerate scoped files, then scan normative statements for duplicates/conflicts with path-level evidence.","findings":[],"metrics":{"files_scanned":0,"links_checked":0,"relations_checked":0},"started_at":"2026-02-12T00:00:00Z","finished_at":"2026-02-12T00:00:00Z"}

thinking
**Deciding file listing approach**
exec
/bin/zsh -lc 'cd /Users/kanggyeonggu/Documents/league-of-algologic && rg --files 01_PRODUCT 02_DESIGN 03_API 04_DOMAIN 05_FRONTEND 06_BACKEND' in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && rg -n --glob '*.md' -e '\\b(MUST|SHALL|SHOULD|REQUIRED|MUST NOT|SHALL NOT|NEVER)\\b' 01_PRODUCT 02_DESIGN 03_API 04_DOMAIN 05_FRONTEND 06_BACKEND | head -n 300" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 51ms:
02_DESIGN/README.md
02_DESIGN/TYPOGRAPHY_SYSTEM.md
01_PRODUCT/CATALOG.md
01_PRODUCT/COPY_TEXT.md
01_PRODUCT/USER_FLOWS.md
01_PRODUCT/ECONOMY.md
01_PRODUCT/README.md
01_PRODUCT/GAME_RULES.md
01_PRODUCT/REQUIREMENTS.md
02_DESIGN/COLOR_SYSTEM.md
05_FRONTEND/FE_API_CLIENT.md
05_FRONTEND/FE_NOTIFICATION_MESSAGES.md
06_BACKEND/BE_ARCHITECTURE.md
06_BACKEND/BE_DATA_MODEL_RULES.md
06_BACKEND/BE_STACK.md
06_BACKEND/BE_REALTIME_RULES.md
06_BACKEND/README.md
06_BACKEND/BE_TEST_RULES.md
06_BACKEND/BE_API_RULES.md
06_BACKEND/BE_CONVENTIONS.md
 succeeded in 51ms:


thinking
**Expanding normative pattern search**
codex
{"run_id":"20260212-211025","agent_id":"duplication-auditor","task_id":"DUP-NORMATIVE","target":{"kind":"duplication","id":"NORMATIVE_DUPLICATION"},"status":"warn","summary":"File inventory complete. I’m now extracting normative language patterns (English and Korean) to identify duplicates/conflicts with evidence lines.","findings":[],"metrics":{"files_scanned":67,"links_checked":0,"relations_checked":0},"started_at":"2026-02-12T00:00:00Z","finished_at":"2026-02-12T00:00:00Z"}

thinking
**Confirming response format approach**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && rg -n --glob '*.md' -i -e '\\b(must\\s+not|must|shall\\s+not|shall|should\\s+not|should|required|never|only|cannot|can't|do not|don't|forbidden|prohibited)\\b' 01_PRODUCT 02_DESIGN 03_API 04_DOMAIN 05_FRONTEND 06_BACKEND | head -n 1000" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && rg -n --glob '*.md' -e '반드시|해야\\s*한다|해야\\s*함|해야\\s*하며|하지\\s*않는다|금지|불가|허용하지\\s*않|권장|필수|원칙|단일 출처|단일출처|SSOT' 01_PRODUCT 02_DESIGN 03_API 04_DOMAIN 05_FRONTEND 06_BACKEND | head -n 1200" in /Users/kanggyeonggu/Documents/league-of-algologic exited 1 in 51ms:
zsh:1: parse error near `do'
 succeeded in 51ms:
05_FRONTEND/FE_COMPONENT_RULES.md:27:- 불필요한 슬롯 남발 금지.
04_DOMAIN/DB_NOTES.md:85:## 4. 캐시/DB 경계 원칙
04_DOMAIN/DB_NOTES.md:98:### 4.3 운영 원칙
04_DOMAIN/DB_NOTES.md:100:- 결과/이력/정산에 필요한 기록은 반드시 DB에 남긴다.
01_PRODUCT/COPY_TEXT.md:1:## 0. 원칙
01_PRODUCT/COPY_TEXT.md:3:- 프론트엔드는 하드코딩 금지
01_PRODUCT/COPY_TEXT.md:4:- 키 기반 사용 권장 (i18n 확장 대비)
02_DESIGN/README.md:2:- 컬러/타이포 토큰과 페이지 요구사항(데이터/상태/상호작용)의 단일 진실(SSOT)을 정의한다.
02_DESIGN/README.md:6:- 포함: 컬러 시스템, 타이포 시스템, 페이지별 필수 데이터/상태/상호작용
02_DESIGN/README.md:16:    BAN_PICK_SHOP.md # BAN/PICK/SHOP 페이지 필수 데이터/상태
02_DESIGN/README.md:17:    IN_GAME.md # IN_GAME 페이지 필수 데이터/상태
02_DESIGN/README.md:18:    LOGIN.md # LOGIN/WELCOME 페이지 필수 데이터/상태
02_DESIGN/README.md:19:    MAIN.md # MAIN 페이지 필수 데이터/상태
02_DESIGN/README.md:20:    MY_PAGE.md # MY_PAGE 페이지 필수 데이터/상태
02_DESIGN/README.md:21:    RESULT.md # RESULT 페이지 필수 데이터/상태
02_DESIGN/README.md:22:    ROOM_LIST.md # ROOM_LIST 상태 필수 데이터/상태
02_DESIGN/README.md:23:    WAITING_ROOM.md # WAITING_ROOM 페이지 필수 데이터/상태
02_DESIGN/README.md:27:**변경 원칙**
02_DESIGN/README.md:28:- 페이지 요구사항(데이터/상태/상호작용)은 `03_API/PAGE_MAP/`과 일치해야 한다.
05_FRONTEND/FE_STATE_RULES.md:2:- 상태 관리 원칙과 스토어 구조 패턴을 정의한다.

thinking
**Assessing duplicated and conflicting norms**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 01_PRODUCT/GAME_RULES.md | sed -n '1,140p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 53ms:
     1	- 이 문서는 게임이 성립하기 위한 **규칙과 판정 기준**을 정의한다.
     2	- 모든 규칙은 서버 기준(authoritative)으로 해석된다.
     3	- UI 표현, 통신 방식, 기술 스택은 다루지 않는다.
     4	## 관련 문서
     5	- [[01_PRODUCT/REQUIREMENTS.md]]
     6	- [[01_PRODUCT/ECONOMY.md]]
     7	- [[01_PRODUCT/CATALOG.md]]
     8	---
     9	## 1. 게임 기본 구조
    10	### 1.1 게임 인원
    11	- 최소 인원: 2명
    12	- 최대 인원: 6명
    13	- 게임 시작 이후 인원 변경은 불가능하다.
    14	### 1.2 게임 상태
    15	- 게임의 authoritative stage는 다음 enum으로 관리한다.
    16	  - LOBBY
    17	  - BAN
    18	  - PICK
    19	  - SHOP (구매)
    20	  - PLAY

thinking
**Analyzing game mode specificity**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 01_PRODUCT/REQUIREMENTS.md | sed -n '1,200p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
     1	- 이 문서는 League Of Algo Logic 서비스의 **기능 요구사항과 범위**를 정의한다.
     2	- “무엇을 제공해야 하는가”를 명확히 하며, 구현 방식은 다루지 않는다.
     3	- 프론트엔드(Antigravity)와 백엔드(Claude Code)는 이 문서를 기준으로 기능 누락이나 임의 확장을 해서는 안 된다.
     4	
     5	## 관련 문서
     6	- [[01_PRODUCT/GAME_RULES.md]]
     7	- [[01_PRODUCT/USER_FLOWS.md]]
     8	- [[01_PRODUCT/ECONOMY.md]]
     9	- [[01_PRODUCT/CATALOG.md]]
    10	
    11	---
    12	## 1. 서비스 접근 및 인증 요구사항
    13	### 1.1 로그인 및 회원가입 정책
    14	- 서비스 최초 진입 시 로그인 페이지로 진입한다.
    15	- 미로그인 상태에서는 어떠한 서비스 기능도 이용할 수 없다.
    16	- 로그인 방식은 카카오 OAuth 기반 소셜 로그인만 지원한다.
    17	- 카카오 로그인 성공 시 서버는 내부 회원 존재 여부를 판단한다.
    18	  - 기존 회원인 경우 즉시 로그인 처리한다.
    19	  - 미회원인 경우 SIGNUP_REQUIRED 상태를 반환한다.
    20	- SIGNUP_REQUIRED 상태인 사용자는 서비스 이용 전에 다음 정보를 입력해야 한다.

thinking
**Evaluating cross-area normative duplicates and conflicts**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 03_API/CONTRACT/REST/AUTH_GUARDS.md | sed -n '1,180p'" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 03_API/CONTRACT/REST/CONVENTIONS.md | sed -n '35,90p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 53ms:
    35	## 2. 기본 규칙
    36	### 2.1 기본 경로
    37	- 모든 REST API는 `/api/v1` prefix를 사용한다.
    38	
    39	### 2.2 Content-Type
    40	- Request: `application/json`
    41	- Response: `application/json; charset=utf-8`
    42	
    43	### 2.3 Time Format / Sync
    44	- 모든 시간 값은 ISO-8601 UTC 문자열을 사용한다.
    45	- `meta.serverTime`가 모든 타이머 동기화 기준이다.
    46	
    47	### 2.4 Auth
    48	- 원칙: `/api/v1/**`는 인증 필요
    49	- 예외(인증 불필요):
    50	  - `POST /auth/kakao/login`
    51	  - `POST /auth/signup`
    52	
    53	---
    54	## 3. 네이밍 규칙
 succeeded in 53ms:
     1	## 0. 작업 양식
     2	가드 규칙 추가/수정 시 아래 양식으로 기록한다.
     3	
     4	```
     5	[가드 목적]
     6	- 왜 필요한가
     7	
     8	[적용 대상]
     9	- 엔드포인트 / 조건 / 단계
    10	
    11	[실패 응답]
    12	- HTTP Status
    13	- error.code
    14	- details.context
    15	
    16	[연관 문서 업데이트]
    17	- OPENAPI.yaml.md
    18	- ERROR_MODEL.md
    19	- API_SUMMARY.md
    20	```

thinking
**Planning normative duplication detection**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && rg -n --glob '*.md' -e '반드시|필수|금지|불가|허용하지|하지 않는다|해야|원칙|고정|권장|MUST|SHOULD|must|should|required|forbid|prohibit' 01_PRODUCT 02_DESIGN 03_API 04_DOMAIN 05_FRONTEND 06_BACKEND | awk -F: '{file="'$1;line=$2; $1="";$2=""; sub(/''^::?/,""); text=$0; gsub(/[`*_]/,"",text); gsub(/[[:space:]]+/," ",text); gsub(/''^ +| +$/,"",text); if(length(text)>0){print text"'"\\t\"file\":\"line}}' | sort | uniq -c | sort -nr | head -n 120" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 53ms:
   1 실시간(WebSocket/STOMP) 계약은 포함하지 않는다.	03_API/CONTRACT/REST/OPENAPI.yaml.md:27
   1 신규 에러 코드를 추가할 때는 아래 항목을 반드시 기입한다.	03_API/CONTRACT/REST/ERROR_MODEL.md:2
   1 변경 원칙	06_BACKEND/README.md:27
   1 변경 원칙	05_FRONTEND/README.md:32
   1 변경 원칙	04_DOMAIN/README.md:17
   1 변경 원칙	03_API/README.md:38
   1 변경 원칙	02_DESIGN/README.md:27
   1 변경 원칙	01_PRODUCT/README.md:21
   1 게임이 FINISHED로 종료되면 active game 응답은 null이며 결과 페이지로 강제 복귀하지 않는다.	03_API/CONTRACT/REST/CONVENTIONS.md:141
   1 게임과 직접적으로 연관된 페이지는 아래 4개로 고정된다.	01_PRODUCT/USER_FLOWS.md:15
   1 게임과 직접 관련된 페이지는 다음 네 개로 고정한다.	01_PRODUCT/REQUIREMENTS.md:100
   1 | 플레이어 강퇴(방장) | POST | /rooms/{roomId}/kick | body.targetUserId 필수 |	03_API/PAGE_MAP/WAITING_ROOM.md:25
   1 | 방장 위임(방장) | POST | /rooms/{roomId}/transfer-host | body.targetUserId 필수 |	03_API/PAGE_MAP/WAITING_ROOM.md:24
   1 | Phase 1 게임 시작 | startGame | 스냅샷 고정 | 1차 DB flush | ROOM, ROOMPLAYER, ROOMKICK, ROOMHOSTHISTORY, GAME, GAMEPLAYER |	04_DOMAIN/REDIS_DB_TIMING.md:26
   1 { "field" "roomName", "reason" "required" }	03_API/CONTRACT/REST/ERROR_MODEL.md:55
   1 required true	03_API/CONTRACT/REST/OPENAPI.yaml.md:995
   1 required true	03_API/CONTRACT/REST/OPENAPI.yaml.md:704
   1 required true	03_API/CONTRACT/REST/OPENAPI.yaml.md:662
   1 required true	03_API/CONTRACT/REST/OPENAPI.yaml.md:1757
   1 required true	03_API/CONTRACT/REST/OPENAPI.yaml.md:1753

thinking
**Assessing cross-area normative conflicts**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && rg -n '강퇴|재입장|kick|KICK' 01_PRODUCT 02_DESIGN 03_API 04_DOMAIN 05_FRONTEND 06_BACKEND" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 51ms:
04_DOMAIN/DB_NOTES.md:28:### 1.4 ROOM_KICK
04_DOMAIN/DB_NOTES.md:80:- ROOM_PLAYER는 left_at NULL을 활성 상태로 정의해 재입장/이력 보존.
04_DOMAIN/DB_NOTES.md:87:- 강퇴(ROOM_KICK), 밴/픽/구매/제출/사용 로그
04_DOMAIN/DB_NOTES.md:105:- 예외: ROOM, ROOM_PLAYER, ROOM_KICK, ROOM_HOST_HISTORY, GAME, GAME_PLAYER, GAME_BAN, GAME_PICK은 write-back(종료 시 DB 반영).
01_PRODUCT/USER_FLOWS.md:96:    - 강퇴된 사용자 재입장 요청은 실패 분기로 처리한다.
01_PRODUCT/USER_FLOWS.md:115:  - 플레이어 강퇴
04_DOMAIN/REDIS_DB_TIMING.md:25:| Phase 0: 로비 | 방 생성/참가/퇴장/강퇴 | 즉시 반영 | 기록 없음 | ROOM, ROOM_PLAYER, ROOM_KICK, ROOM_HOST_HISTORY |
04_DOMAIN/REDIS_DB_TIMING.md:26:| Phase 1: 게임 시작 | startGame | 스냅샷 고정 | 1차 DB flush | ROOM, ROOM_PLAYER, ROOM_KICK, ROOM_HOST_HISTORY, GAME, GAME_PLAYER |
04_DOMAIN/REDIS_DB_TIMING.md:39:  A[createRoom/joinRoom/leaveRoom/kick] -->|Redis only| R[Redis Room State]
04_DOMAIN/DATA_MODEL.md:60:| ROOM_KICK | write-back | 로비 단계 기록은 Redis에 유지, 게임 시작 시 DB 저장 |
04_DOMAIN/DATA_MODEL.md:74:| ROOM_KICK | persistent | 강퇴 기록(재입장 차단) |
04_DOMAIN/DATA_MODEL.md:132:  ROOM_KICK {
04_DOMAIN/DATA_MODEL.md:136:    uuid kicked_by_user_id FK
04_DOMAIN/DATA_MODEL.md:137:    datetime kicked_at
04_DOMAIN/DATA_MODEL.md:295:  USER ||--o{ ROOM_KICK : is_kicked
04_DOMAIN/DATA_MODEL.md:296:  USER ||--o{ ROOM_KICK : kicks
04_DOMAIN/DATA_MODEL.md:300:  ROOM ||--o{ ROOM_KICK : kicks
04_DOMAIN/DATA_MODEL.md:392:### 5.4 ROOM_KICK (storage: persistent)
04_DOMAIN/DATA_MODEL.md:397:| user_id           | uuid     | N    | 강퇴된 User.id     |
04_DOMAIN/DATA_MODEL.md:398:| kicked_by_user_id | uuid     | N    | 강퇴한 방장(User.id) |

thinking
**Assessing subtle spec inconsistencies**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && rg -n '10초|10 sec|10s|remaining|제한시간|phaseRemaining|남은 시간|remainingMs' 01_PRODUCT 02_DESIGN 03_API 04_DOMAIN 05_FRONTEND 06_BACKEND" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 53ms:
01_PRODUCT/CATALOG.md:19:| 해킹 | 상대방의 물리 키보드를 박살내고, 화상 키보드 코딩을 강제한다. | 10초 | +20 | 220 |
01_PRODUCT/CATALOG.md:20:| 월식 | 상대방 화면에 암전 효과를 준다. | 10초 | 0 | 200 |
01_PRODUCT/CATALOG.md:21:| 탈진 | 상대방의 타이핑 속도를 지연시킨다. | 10초 | 0 | 200 |
01_PRODUCT/CATALOG.md:23:| 점화 | 상대방 에디터에 불을 질러 코드를 태운다. | 10초 | +20 | 220 |
04_DOMAIN/DB_NOTES.md:94:- 실시간 화면 스트림, 단계 남은 시간
05_FRONTEND/FE_STATE_RULES.md:35:- BAN/PICK/SHOP 단계 타이머는 10초 고정 규칙을 따른다.
01_PRODUCT/COPY_TEXT.md:46:- STAGE.TIME_LEFT = "남은 시간"
01_PRODUCT/USER_FLOWS.md:142:- BAN 단계 10초 종료 후 서버가 최종 BAN 알고리즘을 산출하고 브로드캐스트한다.
01_PRODUCT/USER_FLOWS.md:143:- 브로드캐스트 이후 PICK 단계로 전환되며, 이 시점부터 PICK 10초 카운트가 시작된다.
01_PRODUCT/USER_FLOWS.md:145:- PICK 단계 10초 종료 후 서버가 최종 PICK 알고리즘을 산출하고 브로드캐스트한다.
01_PRODUCT/USER_FLOWS.md:146:- 브로드캐스트 이후 SHOP 단계로 전환되며, 이 시점부터 SHOP 10초 카운트가 시작된다.
03_API/PAGE_MAP/IN_GAME.md:14:| GET | /games/{gameId}/state | PLAY 시점 스냅샷(remainingMs, players, coin, inventory) 동기화 |
03_API/PAGE_MAP/IN_GAME.md:27:| /topic/games/{gameId} | GAME_STAGE_CHANGED | stage/remainingMs 동기화 |
04_DOMAIN/DATA_MODEL.md:90:| STAGE_REMAINING_MS | derived | 남은 시간(계산값) |
04_DOMAIN/DATA_MODEL.md:691:- remaining_ms = stage_deadline_at - meta.serverTime
02_DESIGN/PAGE_REQUIREMENTS/IN_GAME.md:10:- game state: remainingMs, players, coin, inventory
02_DESIGN/PAGE_REQUIREMENTS/IN_GAME.md:28:- remainingMs 없이 플레이 상태 표시
03_API/PAGE_MAP/BAN_PICK_SHOP.md:14:| GET | /games/{gameId}/state | 현재 stage/remainingMs/coin/inventory 조회 |
03_API/PAGE_MAP/BAN_PICK_SHOP.md:27:### 2.1 단계 제한시간
03_API/PAGE_MAP/BAN_PICK_SHOP.md:28:- BAN/PICK/SHOP는 각 10초로 고정한다.

thinking
**Assessing time display contradictions**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 05_FRONTEND/FE_REALTIME_RULES.md | sed -n '1,120p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 53ms:
     1	## 0. 문서 목적
     2	- 실시간(WebSocket/STOMP) 연결/구독 **관리 패턴**을 정의한다.
     3	- 타이밍/토픽/이벤트 규칙은 관련 문서가 단일 진실이다.
     4	
     5	## 관련 문서
     6	- [[03_API/LIFECYCLE.md]]
     7	- [[03_API/CONTRACT/REALTIME/CONVENTIONS.md]]
     8	- [[03_API/CONTRACT/REALTIME/TOPICS.md]]
     9	- [[03_API/CONTRACT/REALTIME/EVENTS.md]]
    10	- [[03_API/CONTRACT/REALTIME/COMMANDS.md]]
    11	- [[05_FRONTEND/FE_STATE_RULES.md]]
    12	
    13	---
    14	## 1. 연결 관리 원칙
    15	- WebSocket 연결은 단일 인스턴스로 유지한다.
    16	- 연결/재연결/해제는 `realtime/` 모듈만 담당한다.
    17	- 컴포넌트에서 직접 연결 생성 금지.
    18	
    19	---
    20	## 2. 구독 관리 원칙

thinking
**Verifying API timeout conventions**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 03_API/CONTRACT/REALTIME/CONVENTIONS.md | sed -n '58,92p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 53ms:
    58	
    59	---
    60	## 4. 시간/정렬 규칙
    61	- 모든 시간은 ISO-8601 UTC 문자열을 사용한다.
    62	- `meta.serverTime`이 기준이며, 클라이언트는 이 값을 타이머 동기화에 사용한다.
    63	
    64	### 4.1 클라이언트 시간 동기화
    65	- 클라이언트는 서버 시간을 권위 시간으로 사용한다.
    66	- TIME_SYNC 이벤트는 `/user/queue/time`으로 전송된다.
    67	- 오프셋 계산식(예시):
    68	  - offset = serverTime - ((clientSendTime + clientReceiveTime) / 2)
    69	- 오프셋 샘플은 RTT가 가장 낮은 값 또는 중앙값을 사용한다.
    70	- 로컬 타이머는 `performance.now()` 등 monotonic clock을 사용한다.
    71	- 재동기화 주기:
    72	  - 기본: 10초
    73	  - BAN/PICK/SHOP 단계: 2초
    74	- remainingMs는 `stage_deadline_at - meta.serverTime` 기준으로 계산한다.
    75	
    76	---
    77	## 5. 오류 처리

thinking
**Identifying potential single source conflicts**
exec
/bin/zsh -lc 'cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 01_PRODUCT/README.md' in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc 'cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 02_DESIGN/README.md' in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc 'cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 03_API/README.md' in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc 'cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 04_DOMAIN/README.md' in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc 'cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 06_BACKEND/README.md' in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc 'cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 05_FRONTEND/README.md' in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
     1	**목적**
     2	- 제품 요구사항/정책/카피의 단일 진실(SSOT)을 정의한다.
     3	- 기능/플로우/룰 변경은 반드시 이 디렉토리에서 먼저 갱신한다.
     4	
     5	**범위**
     6	- 포함: 요구사항, 유저 플로우, 게임 규칙, 경제/카탈로그, UI 카피
     7	- 제외: API 계약, 데이터 모델, 구현 규칙
     8	
     9	**파일 구조**
    10	```text
    11	01_PRODUCT/
    12	  README.md # 이 문서
    13	  CATALOG.md # 아이템/스펠/알고리즘 카탈로그 기준
    14	  COPY_TEXT.md # UI 문구/메시지 키 기준
    15	  ECONOMY.md # 재화/보상/가격 정책
    16	  GAME_RULES.md # 게임 규칙/승패/라운드 규정
    17	  REQUIREMENTS.md # 핵심 기능 요구사항
    18	  USER_FLOWS.md # 주요 사용자 플로우
    19	```
    20	
 succeeded in 52ms:
     1	**목적**
     2	- 컬러/타이포 토큰과 페이지 요구사항(데이터/상태/상호작용)의 단일 진실(SSOT)을 정의한다.
     3	- 레이아웃/컴포넌트 위치/사이즈/화면 구성은 범위에서 제외한다.
     4	
     5	**범위**
     6	- 포함: 컬러 시스템, 타이포 시스템, 페이지별 필수 데이터/상태/상호작용
     7	- 제외: 화면 레이아웃, UI 배치, 컴포넌트 위치/크기, 픽셀 기반 목업
     8	
     9	**파일 구조**
    10	```text
    11	02_DESIGN/
    12	  README.md # 이 문서
    13	  COLOR_SYSTEM.md # 컬러 토큰 정의
    14	  TYPOGRAPHY_SYSTEM.md # 폰트/웨이트/라인하이트 토큰 정의
    15	  PAGE_REQUIREMENTS/
    16	    BAN_PICK_SHOP.md # BAN/PICK/SHOP 페이지 필수 데이터/상태
    17	    IN_GAME.md # IN_GAME 페이지 필수 데이터/상태
    18	    LOGIN.md # LOGIN/WELCOME 페이지 필수 데이터/상태
    19	    MAIN.md # MAIN 페이지 필수 데이터/상태
    20	    MY_PAGE.md # MY_PAGE 페이지 필수 데이터/상태
 succeeded in 51ms:
     1	**목적**
     2	- REST/실시간 계약과 페이지 맵의 단일 진실(SSOT)을 정의한다.
     3	- 프론트/백엔드 구현은 반드시 이 계약을 기준으로 한다.
     4	
     5	**범위**
     6	- 포함: OpenAPI, REST 규약, 실시간 규약, 페이지별 계약 매핑, 라이프사이클
     7	- 제외: 구현 코드, DB 모델 세부 설계
     8	
     9	**파일 구조**
    10	```text
    11	03_API/
    12	  README.md # 이 문서
    13	  LIFECYCLE.md # 로그인/복귀/게임 진행 흐름 기준
    14	  CONTRACT/
    15	    REST/
    16	      API_SUMMARY.md # REST API 요약
    17	      AUTH_GUARDS.md # 인증/인가 가드 규칙
    18	      CONVENTIONS.md # REST 공통 규약
    19	      ERROR_MODEL.md # 에러 모델 규칙
    20	      OPENAPI.yaml.md # REST API 스키마(OpenAPI)
 succeeded in 52ms:
     1	**목적**
     2	- 도메인 모델 및 DB 규칙의 단일 진실(SSOT)을 정의한다.
     3	
     4	**범위**
     5	- 포함: 데이터 모델, DB 설계 노트, Redis 타이밍 규칙
     6	- 제외: 구현 코드, API 계약 세부
     7	
     8	**파일 구조**
     9	```text
    10	04_DOMAIN/
    11	  README.md # 이 문서
    12	  DATA_MODEL.md # 엔티티/관계/도메인 모델 기준
    13	  DB_NOTES.md # DB 설계/정합성 메모
    14	  REDIS_DB_TIMING.md # Redis/DB 동기화 타이밍 규칙
    15	```
    16	
    17	**변경 원칙**
    18	- 데이터 모델 변경은 `04_DOMAIN/`에서 먼저 수정한다.
 succeeded in 52ms:
     1	**목적**
     2	- 프론트엔드 구현 규칙/패턴/컨벤션의 단일 진실(SSOT)을 정의한다.
     3	- UI 레이아웃/시각 디자인 자체는 범위에서 제외한다.
     4	
     5	**범위**
     6	- 포함: 아키텍처, 상태관리, API 클라이언트, 라우팅, 실시간, 스타일 적용 규칙, 안티패턴
     7	- 제외: 화면 레이아웃/컴포넌트 배치, 디자인 목업
     8	
     9	**파일 구조**
    10	```text
    11	05_FRONTEND/
    12	  README.md # 이 문서
    13	  FE_STACK.md # 프론트 기술 스택 고정값
    14	  FE_CONVENTIONS.md # 네이밍/구조/유닛 규칙
    15	  FE_ARCHITECTURE.md # 레이어 경계/모듈 책임 규칙
    16	  FE_ROUTING_RULES.md # 라우팅/가드/전환 규칙
    17	  FE_STATE_RULES.md # 상태 분리/스토어 구조 규칙
    18	  FE_API_CLIENT.md # REST 호출/에러 처리 규칙
    19	  FE_REALTIME_RULES.md # 실시간 구독/연결 규칙
    20	  FE_COMPONENT_RULES.md # 컴포넌트 API 설계 규칙
 succeeded in 52ms:
     1	**목적**
     2	- 백엔드 구현 규칙/패턴/컨벤션의 단일 진실(SSOT)을 정의한다.
     3	
     4	**범위**
     5	- 포함: 아키텍처, API 규칙, 실시간 규칙, 데이터 모델 규칙, 테스트 규칙
     6	- 제외: 구현 코드, 인프라 프로비저닝
     7	
     8	**파일 구조**
     9	```text
    10	06_BACKEND/
    11	  README.md # 이 문서
    12	  BE_STACK.md # 백엔드 기술 스택 고정값
    13	  BE_ARCHITECTURE.md # 모듈 경계/레이어 책임 규칙
    14	  BE_CONVENTIONS.md # 네이밍/구조/코딩 컨벤션
    15	  BE_API_RULES.md # REST 구현 규칙
    16	  BE_REALTIME_RULES.md # 실시간(STOMP) 구현 규칙
    17	  BE_DATA_MODEL_RULES.md # 데이터 모델/DB 규칙
    18	  BE_TEST_RULES.md # 테스트 전략/규칙
    19	  BE_AGENT_SPLIT.md # 병렬 에이전트 분할 기준
    20	```

thinking
**Assessing boundary-related duplication**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 01_PRODUCT/COPY_TEXT.md | sed -n '1,140p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 53ms:
     1	## 0. 원칙
     2	- UI 문구는 이 파일이 단일 진실
     3	- 프론트엔드는 하드코딩 금지
     4	- 키 기반 사용 권장 (i18n 확장 대비)
     5	
     6	## 관련 문서
     7	- [[01_PRODUCT/USER_FLOWS.md]]
     8	
     9	## 1. Auth
    10	- AUTH.WELCOME_TITLE = "League Of Algo Logic"
    11	- AUTH.WELCOME_DESC = "실시간 알고리즘 배틀 플랫폼"
    12	- AUTH.LOGIN_WITH_KAKAO = "카카오로 시작하기"
    13	- AUTH.LOGIN_REQUIRED = "로그인이 필요합니다."
    14	
    15	## 2. Common
    16	- COMMON.CONFIRM = "확인"
    17	- COMMON.CANCEL = "취소"
    18	- COMMON.CLOSE = "닫기"
    19	- COMMON.LOADING = "로딩 중..."
    20	- COMMON.ERROR = "오류가 발생했습니다."

thinking
**Identifying potential message duplications**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 05_FRONTEND/FE_NOTIFICATION_MESSAGES.md | sed -n '1,220p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 53ms:
     1	## 목적
     2	- 알림 컴포넌트에서 사용하는 메시지 키와 한국어 문구를 단일 문서로 정의한다.
     3	- 에러 알림은 `ERROR.<CODE>` 키를 사용한다.
     4	- 이벤트/시스템 알림은 `NOTICE.*` 키를 사용한다.
     5	
     6	## 관련 문서
     7	- [[03_API/CONTRACT/REST/ERROR_MODEL.md]]
     8	
     9	---
    10	## 1. 기본 규칙
    11	- 모든 알림은 `messageKey`로 렌더링한다.
    12	- `messageKey`는 문서에 정의된 값만 사용한다.
    13	- 미정의 키 수신 시 `ERROR.UNKNOWN`을 사용한다.
    14	
    15	---
    16	## 2. ERROR 매핑 (error.code → messageKey → ko)
    17	| error.code                      | messageKey                            | ko                          |
    18	| ------------------------------- | ------------------------------------- | --------------------------- |
    19	| UNAUTHORIZED                    | ERROR.UNAUTHORIZED                    | 로그인이 필요합니다.                 |
    20	| FORBIDDEN                       | ERROR.FORBIDDEN                       | 권한이 없습니다.                   |

thinking
**Identifying normative ownership conflicts**
exec
/bin/zsh -lc 'cd /Users/kanggyeonggu/Documents/league-of-algologic && ls -1 02_DESIGN/PAGE_REQUIREMENTS' in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
BAN_PICK_SHOP.md
IN_GAME.md
LOGIN.md
MAIN.md
MY_PAGE.md
RESULT.md
ROOM_LIST.md
WAITING_ROOM.md

thinking
**Analyzing conflicting normative duplication**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 05_FRONTEND/FE_STATE_RULES.md | sed -n '1,120p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 53ms:
     1	## 0. 문서 목적
     2	- 상태 관리 원칙과 스토어 구조 패턴을 정의한다.
     3	- 서버가 authoritative이며, 프론트는 상태를 추론하지 않는다.
     4	
     5	## 관련 문서
     6	- [[03_API/CONTRACT/REST/CONVENTIONS.md]]
     7	- [[03_API/CONTRACT/REALTIME/CONVENTIONS.md]]
     8	- [[03_API/LIFECYCLE.md]]
     9	- [[05_FRONTEND/FE_NOTIFICATION_MESSAGES.md]]
    10	
    11	---
    12	## 1. 상태 분류 규칙
    13	- Local State: 컴포넌트 내부에서만 사용
    14	- UI State: 페이지/패널 상태(스토어 관리)
    15	- Server State: REST/실시간 데이터(스토어 관리)
    16	
    17	---
    18	## 2. 스토어 구조 원칙
    19	- 스토어는 도메인 단위로 분리한다.
    20	- 스토어는 **서버 스냅샷 + 실시간 이벤트**를 단일 상태로 통합한다.

thinking
**Analyzing rule and text ownership conflicts**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 03_API/CONTRACT/REST/ERROR_MODEL.md | sed -n '1,170p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 53ms:
     1	## 0. 작업 양식
     2	신규 에러 코드를 추가할 때는 아래 항목을 반드시 기입한다.
     3	
     4	```
     5	[코드]
     6	- CODE_NAME
     7	
     8	[의미]
     9	- 언제 발생하는가
    10	
    11	[HTTP 상태 코드]
    12	- 4xx/5xx
    13	
    14	[details.context]
    15	- 포함해야 하는 필드
    16	
    17	[영향 범위]
    18	- 관련 엔드포인트
    19	```
    20	

thinking
**Checking stage enum consistency**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 03_API/LIFECYCLE.md | sed -n '1,220p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 53ms:
     1	## 0. 문서 목적
     2	- REST/실시간 통신의 연결/구독/해제/호출 타이밍을 페이지 단위로 정의한다.
     3	- REST는 스냅샷/명령, WebSocket은 상태 변화 이벤트를 담당한다.
     4	
     5	## 관련 문서
     6	- [[01_PRODUCT/USER_FLOWS.md]]
     7	- [[03_API/CONTRACT/REST/OPENAPI.yaml.md]]
     8	- [[03_API/CONTRACT/REALTIME/CONVENTIONS.md]]
     9	- [[03_API/CONTRACT/REALTIME/TOPICS.md]]
    10	
    11	---
    12	## 1. 전제
    13	- WebSocket endpoint: `/ws`
    14	- 인증: `Authorization: Bearer <JWT>`
    15	- 공통 Envelope/type 규칙은 REALTIME_CONVENTIONS를 따른다.
    16	- active game은 FINISHED 시점에 즉시 해제된다.
    17	  - RESULT 화면은 이벤트 기반으로 표시하되, 재접속 시 강제 복귀되지 않는다.
    18	
    19	---
    20	## 2. 연결 및 기본 구독

thinking
**Assessing documentation conflicts on DB timing**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 04_DOMAIN/DB_NOTES.md | sed -n '1,220p'" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 04_DOMAIN/REDIS_DB_TIMING.md | sed -n '1,180p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 53ms:
     1	## 0. 문서 목적
     2	- Redis와 DB의 저장 타이밍(Write Policy)을 명확히 정의한다.
     3	- 로비~게임 종료 사이클에서 저장 시점을 일관되게 적용한다.
     4	
     5	## 관련 문서
     6	- [[04_DOMAIN/DATA_MODEL.md]]
     7	- [[04_DOMAIN/DB_NOTES.md]]
     8	- [[03_API/LIFECYCLE.md]]
     9	
    10	---
    11	## 1. 기본 원칙
    12	- 실시간 상태(=ephemeral/derived)는 Redis가 단일 진실이다.
    13	- DB는 결과/이력/정산에 필요한 persistent의 최종 저장소다.
    14	- 로비 단계는 Redis-only로 운영한다.
    15	
    16	---
    17	## 2. Write Policy 정의
    18	- write-through: 상태 변경 즉시 DB에 기록한다. Redis는 캐시/미러로만 사용한다.
    19	- write-back: Redis가 실시간 단일 진실이다. 종료 시점에 DB로 스냅샷을 반영한다.
    20	
 succeeded in 53ms:
     1	## 0. 목적
     2	- DATA_MODEL.md를 보조하는 성능/설계 이유 문서.
     3	- 단일 진실은 DATA_MODEL.md이다.
     4	
     5	## 관련 문서
     6	- [[04_DOMAIN/DATA_MODEL.md]]
     7	- [[04_DOMAIN/REDIS_DB_TIMING.md]]
     8	
     9	---
    10	## 1. 인덱스 전략
    11	### 1.1 USER
    12	- unique: kakao_id
    13	- unique: nickname
    14	- index: score DESC (랭킹 조회)
    15	- index: active_game_id (복귀 조회)
    16	
    17	### 1.2 ROOM
    18	- index: (game_type, language)
    19	- index: room_name (검색)
    20	- index: host_user_id

thinking
**Identifying DB flush timing conflict**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && rg -n 'Write Policy|write-back|write-through|ROOM_KICK|ROOM_HOST_HISTORY|GAME_PLAYER|종료 시|1차|flush' 04_DOMAIN/DATA_MODEL.md | head -n 80" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
50:### 2.3 Write Policy
51:- write-through: 상태 변경 즉시 DB에 기록한다. Redis는 캐시/미러로만 사용한다.
52:- write-back: Redis가 실시간 단일 진실이다. 종료 시점에 DB로 스냅샷을 반영한다.
53:- 기본값: persistent = write-through. 예외는 아래 표에 명시한다.
55:### 2.4 Write Policy 매핑(예외)
58:| ROOM | write-back | 로비 상태는 Redis에서 관리, 게임 시작 시 DB 스냅샷 저장 |
59:| ROOM_PLAYER | write-back | 로비 참가 상태는 Redis에서 관리, 게임 시작 시 DB 스냅샷 저장 |
60:| ROOM_KICK | write-back | 로비 단계 기록은 Redis에 유지, 게임 시작 시 DB 저장 |
61:| ROOM_HOST_HISTORY | write-back | 로비 단계 기록은 Redis에 유지, 게임 시작 시 DB 저장 |
62:| GAME | write-back | 진행 상태는 Redis에서 관리, GAME_FINISHED 시 DB 저장 |
63:| GAME_PLAYER | write-back | 진행 중 점수/상태는 Redis에서 관리, GAME_FINISHED 시 DB 저장 |
64:| GAME_BAN | write-back | 진행 중 밴/픽은 Redis에서 관리, GAME_FINISHED 시 DB 저장 |
65:| GAME_PICK | write-back | 진행 중 밴/픽은 Redis에서 관리, GAME_FINISHED 시 DB 저장 |
74:| ROOM_KICK | persistent | 강퇴 기록(재입장 차단) |
75:| ROOM_HOST_HISTORY | persistent | 방장 위임 이력 |
77:| GAME_PLAYER | persistent | 게임 참가자 상태/점수 |
132:  ROOM_KICK {
140:  ROOM_HOST_HISTORY {
163:  GAME_PLAYER {
295:  USER ||--o{ ROOM_KICK : is_kicked

thinking
**Assessing cross-area duplication conflicts**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 05_FRONTEND/FE_API_CLIENT.md | sed -n '1,80p'" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 05_FRONTEND/FE_STYLING.md | sed -n '18,80p'" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 05_FRONTEND/FE_CONVENTIONS.md | sed -n '35,90p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 53ms:
    35	---
    36	## 4. Vue 컴포넌트 규칙
    37	- `<script setup>`을 기본으로 사용한다.
    38	- `defineProps`/`defineEmits`를 명시적으로 선언한다.
    39	- props는 `camelCase`, 이벤트는 `kebab-case`로 노출한다.
    40	- 컴포넌트에서 직접 REST/WS 호출 금지(스토어/서비스 통해 호출).
    41	- 컴포넌트 스타일은 `<style scoped lang="scss">`를 기본으로 사용한다.
    42	
    43	---
    44	## 5. Sizing/Unit Rules (--gu)
    45	- 모든 크기/간격/폰트/라운드는 `--gu` 기반 토큰만 사용한다.
    46	- px/rem/em/vw/vh 직접 사용 금지(단, `--gu` 정의는 예외).
    47	- 1920x1080은 **환산 기준**이며 고정 해상도 규칙이 아니다.
    48	- 1px 헤어라인은 `calc(var(--gu) * 0.0625)`로 표현한다.
    49	- 스케일링 컨테이너는 `aspect-ratio: 16 / 9`를 필수로 둔다.
    50	
    51	---
    52	## 6. i18n/문구 규칙
    53	- UI 문구는 하드코딩 금지.
    54	- 모든 문구는 [[01_PRODUCT/COPY_TEXT.md]] 키를 사용한다.
 succeeded in 53ms:
     1	## 0. 문서 목적
     2	- REST 호출 구조와 에러 분기 **코드 패턴**을 정의한다.
     3	- API 규약/스키마는 `03_API/CONTRACT/REST/*.md`가 단일 진실이다.
     4	
     5	## 관련 문서
     6	- [[03_API/CONTRACT/REST/OPENAPI.yaml.md]]
     7	- [[03_API/CONTRACT/REST/CONVENTIONS.md]]
     8	- [[03_API/CONTRACT/REST/ERROR_MODEL.md]]
     9	- [[01_PRODUCT/COPY_TEXT.md]]
    10	- [[05_FRONTEND/FE_STATE_RULES.md]]
    11	
    12	---
    13	## 1. 호출 구조 원칙
    14	- 모든 REST 호출은 `api/` 모듈에서만 수행한다.
    15	- 컴포넌트/페이지에서 직접 `fetch/axios` 사용 금지.
    16	- 스토어는 `api/` 모듈을 통해서만 서버와 통신한다.
    17	
    18	---
    19	## 2. 응답 처리 규칙
    20	- 성공 응답은 `data`만 사용한다.
 succeeded in 53ms:
    18	- 기본값: `--gu = 1vw`
    19	- 화면이 16:9보다 넓을 때(height가 병목)에는 `--gu = calc(100vh * 16 / 900)`를 사용한다.
    20	- 화면이 16:9보다 좁을 때(width가 병목)에는 `--gu = 1vw`를 유지한다.
    21	
    22	---
    23	## 3. 토큰/단위 규칙
    24	- 모든 크기/간격/폰트/라운드/그림자는 `calc(var(--gu) * N)` 또는 토큰 변수만 사용한다.
    25	- px/rem/em/vw/vh 직접 사용 금지(단, `--gu` 계산 정의는 예외).
    26	- 1px 헤어라인은 `calc(var(--gu) * 0.0625)`로 표현한다(1920 기준 1px).
    27	- 토큰 네이밍 예시: `--fontSize-*`, `--space-*`, `--radius-*`, `--shadow-*`, `--glow-*`.
    28	
    29	---
    30	## 4. 16:9 컨테이너 규칙
    31	- 스케일링 컨테이너는 `aspect-ratio: 16 / 9`를 반드시 지정한다.
    32	- 기준 크기는 `width: calc(var(--gu) * 100)`, `height: calc(var(--gu) * 56.25)`를 사용한다.
    33	- 레이아웃 재배치는 금지하고 **스케일링만 허용**한다.
    34	
    35	---
    36	## 5. CSS 변수 네이밍 규칙
    37	- 토큰 키의 `.`를 `-`로 변환하여 변수명을 만든다.

thinking
**Identifying key naming conflicts**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && rg -n 'COPY_TEXT|messageKey|ERROR\\.|NOTICE\\.|문구' 05_FRONTEND/*.md 05_FRONTEND/**/*.md" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
05_FRONTEND/ANTI_PATTERNS.md:18:## 2. UI/문구
05_FRONTEND/ANTI_PATTERNS.md:19:- UI 문구 하드코딩
05_FRONTEND/FE_API_CLIENT.md:9:- [[01_PRODUCT/COPY_TEXT.md]]
05_FRONTEND/FE_API_CLIENT.md:34:- UI 메시지는 [[01_PRODUCT/COPY_TEXT.md]] 키로만 표시한다.
05_FRONTEND/FE_STATE_RULES.md:43:## 6. 알림/에러 문구 규칙
05_FRONTEND/FE_STATE_RULES.md:44:- 서버 응답의 `error.code`에 대한 안내 문구는 프론트엔드에서 관리한다.
05_FRONTEND/FE_STATE_RULES.md:45:- 동일 `error.code`는 동일 문구로 매핑되며, 서버에서 문구를 전달하지 않는다.
05_FRONTEND/FE_STATE_RULES.md:46:- 이벤트 기반 알림은 `NOTICE.*` 키를 사용한다.
05_FRONTEND/ANTI_PATTERNS.md:18:## 2. UI/문구
05_FRONTEND/ANTI_PATTERNS.md:19:- UI 문구 하드코딩
05_FRONTEND/FE_API_CLIENT.md:9:- [[01_PRODUCT/COPY_TEXT.md]]
05_FRONTEND/FE_API_CLIENT.md:34:- UI 메시지는 [[01_PRODUCT/COPY_TEXT.md]] 키로만 표시한다.
05_FRONTEND/FE_NOTIFICATION_MESSAGES.md:2:- 알림 컴포넌트에서 사용하는 메시지 키와 한국어 문구를 단일 문서로 정의한다.
05_FRONTEND/FE_NOTIFICATION_MESSAGES.md:3:- 에러 알림은 `ERROR.<CODE>` 키를 사용한다.
05_FRONTEND/FE_NOTIFICATION_MESSAGES.md:4:- 이벤트/시스템 알림은 `NOTICE.*` 키를 사용한다.
05_FRONTEND/FE_NOTIFICATION_MESSAGES.md:11:- 모든 알림은 `messageKey`로 렌더링한다.
05_FRONTEND/FE_NOTIFICATION_MESSAGES.md:12:- `messageKey`는 문서에 정의된 값만 사용한다.
05_FRONTEND/FE_NOTIFICATION_MESSAGES.md:13:- 미정의 키 수신 시 `ERROR.UNKNOWN`을 사용한다.
05_FRONTEND/FE_NOTIFICATION_MESSAGES.md:16:## 2. ERROR 매핑 (error.code → messageKey → ko)
05_FRONTEND/FE_NOTIFICATION_MESSAGES.md:17:| error.code                      | messageKey                            | ko                          |

thinking
**Identifying internal conflicts across conventions**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && rg -n '"'^'"\\s*delete:|\\|\\s*DELETE\\s*\\|' 03_API/CONTRACT/REST/OPENAPI.yaml.md 03_API/CONTRACT/REST/API_SUMMARY.md 03_API/PAGE_MAP/*.md" in /Users/kanggyeonggu/Documents/league-of-algologic exited 1 in 52ms:


thinking
**Assessing duplicate and conflicting rules**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 03_API/PAGE_MAP/IN_GAME.md | sed -n '1,140p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 51ms:
     1	## 목적
     2	- IN_GAME(PLAY 단계) 화면의 REST/실시간 매핑을 정의한다.
     3	
     4	## 관련 문서
     5	- [[03_API/CONTRACT/REST/OPENAPI.yaml.md]]
     6	- [[03_API/CONTRACT/REALTIME/TOPICS.md]]
     7	- [[03_API/CONTRACT/REALTIME/EVENTS.md]]
     8	- [[03_API/CONTRACT/REALTIME/COMMANDS.md]]
     9	
    10	---
    11	## 1. 진입 시 REST
    12	| 메서드 | 엔드포인트 | 목적 |
    13	|---|---|---|
    14	| GET | /games/{gameId}/state | PLAY 시점 스냅샷(remainingMs, players, coin, inventory) 동기화 |
    15	
    16	---
    17	## 2. 사용자 액션 → REST
    18	| 사용자 액션 | 메서드 | 엔드포인트 | 비고 |
    19	|---|---|---|---|
    20	| 코드 제출 | POST | /games/{gameId}/submissions | stage=PLAY에서만 허용 |

thinking
**Assessing API method conflicts**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && rg -n '"'^'"\\s*(get|post|patch|put|delete):' 03_API/CONTRACT/REST/OPENAPI.yaml.md | awk -F: '{print "'$3}'"' | sort | uniq -c" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 51ms:
  27 

thinking
**Correcting search approach**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && rg -n '"'^'"\\s*(get|post|patch|put|delete):' 03_API/CONTRACT/REST/OPENAPI.yaml.md" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 53ms:
657:    post:
699:    post:
741:    post:
771:    get:
806:    get:
843:    get:
878:    get:
929:    get:
991:    post:
1044:    get:
1091:    post:
1150:    post:
1198:    post:
1251:    post:
1304:    post:
1363:    post:
1434:    post:
1505:    get:
1552:    post:
1617:    post:

thinking
**Planning cross-directory duplication check**
codex
{"run_id":"20260212-211025","agent_id":"duplication-auditor","task_id":"DUP-NORMATIVE","target":{"kind":"duplication","id":"NORMATIVE_DUPLICATION"},"status":"warn","summary":"I’ve isolated likely conflict clusters and now I’m running a normalized duplicate scan to validate cross-area duplication before finalizing findings.","findings":[],"metrics":{"files_scanned":67,"links_checked":0,"relations_checked":0},"started_at":"2026-02-12T00:00:00Z","finished_at":"2026-02-12T00:00:00Z"}
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && rg -n --glob '*.md' -e '반드시|필수|금지|불가|허용하지|하지 않는다|해야|원칙|고정|must|should|required|prohibit|forbid' 01_PRODUCT 02_DESIGN 03_API 04_DOMAIN 05_FRONTEND 06_BACKEND | awk -F: '{path="'$1;line=$2;text=$0; sub(/''^[''^:]+:[0-9]+:/,"",text); gsub(/[`*_]/,"",text); gsub(/[[:space:]]+/," ",text); gsub(/''^ +| +$/,"",text); if(length(text)<8) next; top=path; sub(/'"\\/.*/,\"\",top); norm=tolower(text); gsub(/[[:punct:]]/,\"\",norm); gsub(/[[:space:]]+/,\" \",norm); print norm\"\\t\"top\"\\t\"path\":\"line\"\\t\"text}' | sort -t"'$'"'\\t' -k1,1 -k2,2 | awk -F'\\t' 'BEGIN{prev=\"\";count=0;tops=\"\";ev=\"\";raw=\"\"} {if("'$1!=prev && prev!=""){if(count>1){n=split(tops,a," "); delete seen; uniq=0; for(i=1;i<=n;i++){if(a[i]!=""&&!seen[a[i]]++){uniq++}} if(uniq>1){print count"'"\\t\"prev\"\\t\"tops\"\\t\"ev\"\\t\"raw}}} if("'$1!=prev){prev=$1;count=1;tops=$2;ev=$3;raw=$4}else{count++;tops=tops" "$2;ev=ev" || "$3}} END{if(prev!=""&&count>1){n=split(tops,a," "); delete seen; uniq=0; for(i=1;i<=n;i++){if(a[i]!=""&&!seen[a[i]]++){uniq++}} if(uniq>1){print count"'"\\t\"prev\"\\t\"tops\"\\t\"ev\"\\t\"raw}}}' | sort -nr | head -n 80" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 53ms:
6	변경 원칙	01_PRODUCT 02_DESIGN 03_API 04_DOMAIN 05_FRONTEND 06_BACKEND	01_PRODUCT/README.md:21 || 02_DESIGN/README.md:27 || 03_API/README.md:38 || 04_DOMAIN/README.md:17 || 05_FRONTEND/README.md:32 || 06_BACKEND/README.md:27	변경 원칙
3	 1920x1080은 환산 기준이며 고정 해상도 규칙이 아니다	02_DESIGN 05_FRONTEND 05_FRONTEND	02_DESIGN/TYPOGRAPHY_SYSTEM.md:5 || 05_FRONTEND/FE_CONVENTIONS.md:47 || 05_FRONTEND/FE_STYLING.md:12	- 1920x1080은 환산 기준이며 고정 해상도 규칙이 아니다.
2	 banpickshop 단계 제한시간은 각 10초로 고정한다	01_PRODUCT 03_API	01_PRODUCT/GAME_RULES.md:56 || 03_API/LIFECYCLE.md:77	- BAN/PICK/SHOP 단계 제한시간은 각 10초로 고정한다.
2	 2 책임 분리 원칙	05_FRONTEND 06_BACKEND	05_FRONTEND/FE_ARCHITECTURE.md:36 || 06_BACKEND/BE_ARCHITECTURE.md:26	## 2. 책임 분리 원칙

thinking
**Identifying cross-directory duplication**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 05_FRONTEND/FE_STYLING.md | sed -n '1,24p'" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 05_FRONTEND/FE_CONVENTIONS.md | sed -n '42,55p'" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 02_DESIGN/TYPOGRAPHY_SYSTEM.md | sed -n '1,40p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 53ms:
     1	## 0. 문서 목적
     2	- 폰트 패밀리/크기/웨이트/라인하이트 토큰의 단일 진실을 정의한다.
     3	
     4	## 1. 기준 해상도/환산
     5	- 1920x1080은 **환산 기준**이며 고정 해상도 규칙이 아니다.
     6	- 실제 렌더링 크기는 `--gu` 기반 스케일링을 따른다.
     7	
     8	## 2. 폰트 패밀리
     9	| Token | Value |
    10	|---|---|
    11	| font.display | "Oxanium", "Noto Sans KR", sans-serif |
    12	| font.ui | "Rajdhani", "Noto Sans KR", sans-serif |
    13	| font.mono | "JetBrains Mono", "Noto Sans KR", monospace |
    14	
    15	## 3. 폰트 웨이트
    16	| Token | Values |
    17	|---|---|
    18	| fontWeight.display | 700, 800 |
    19	| fontWeight.ui | 500, 600 |
    20	| fontWeight.mono | 400, 500 |
 succeeded in 53ms:
    42	
    43	---
    44	## 5. Sizing/Unit Rules (--gu)
    45	- 모든 크기/간격/폰트/라운드는 `--gu` 기반 토큰만 사용한다.
    46	- px/rem/em/vw/vh 직접 사용 금지(단, `--gu` 정의는 예외).
    47	- 1920x1080은 **환산 기준**이며 고정 해상도 규칙이 아니다.
    48	- 1px 헤어라인은 `calc(var(--gu) * 0.0625)`로 표현한다.
    49	- 스케일링 컨테이너는 `aspect-ratio: 16 / 9`를 필수로 둔다.
    50	
    51	---
    52	## 6. i18n/문구 규칙
    53	- UI 문구는 하드코딩 금지.
    54	- 모든 문구는 [[01_PRODUCT/COPY_TEXT.md]] 키를 사용한다.
    55	
 succeeded in 53ms:
     1	## 0. 문서 목적
     2	- `--gu` 기반 스케일링과 토큰 적용 규칙을 정의한다.
     3	- 디자인의 단일 진실은 [[02_DESIGN/COLOR_SYSTEM.md]], [[02_DESIGN/TYPOGRAPHY_SYSTEM.md]]이며, 본 문서는 적용 방식만 기술한다.
     4	
     5	## 관련 문서
     6	- [[02_DESIGN/COLOR_SYSTEM.md]]
     7	- [[02_DESIGN/TYPOGRAPHY_SYSTEM.md]]
     8	
     9	---
    10	## 1. --gu 정의
    11	- `--gu`는 **16:9 컨테이너 너비의 1%**다.
    12	- 1920x1080은 **환산 기준**이며 고정 해상도 규칙이 아니다.
    13	- 기준 환산: 1920 기준 `1gu = 19.2px`
    14	- 환산 공식: `gu = px / 19.2`, `px = gu * 19.2`
    15	
    16	---
    17	## 2. --gu 계산 규칙
    18	- 기본값: `--gu = 1vw`
    19	- 화면이 16:9보다 넓을 때(height가 병목)에는 `--gu = calc(100vh * 16 / 900)`를 사용한다.
    20	- 화면이 16:9보다 좁을 때(width가 병목)에는 `--gu = 1vw`를 유지한다.

thinking
**Gathering evidence of duplication and conflicts**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 04_DOMAIN/DATA_MODEL.md | sed -n '46,70p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 53ms:
    46	### 2.2 Redis 실시간 상태 범위
    47	- 실시간 상태(=ephemeral/derived)는 Redis가 단일 진실이다.
    48	- DB에는 결과/이력/정산에 필요한 persistent만 기록한다.
    49	
    50	### 2.3 Write Policy
    51	- write-through: 상태 변경 즉시 DB에 기록한다. Redis는 캐시/미러로만 사용한다.
    52	- write-back: Redis가 실시간 단일 진실이다. 종료 시점에 DB로 스냅샷을 반영한다.
    53	- 기본값: persistent = write-through. 예외는 아래 표에 명시한다.
    54	
    55	### 2.4 Write Policy 매핑(예외)
    56	| 엔티티 | write policy | 기준 |
    57	|---|---|---|
    58	| ROOM | write-back | 로비 상태는 Redis에서 관리, 게임 시작 시 DB 스냅샷 저장 |
    59	| ROOM_PLAYER | write-back | 로비 참가 상태는 Redis에서 관리, 게임 시작 시 DB 스냅샷 저장 |
    60	| ROOM_KICK | write-back | 로비 단계 기록은 Redis에 유지, 게임 시작 시 DB 저장 |
    61	| ROOM_HOST_HISTORY | write-back | 로비 단계 기록은 Redis에 유지, 게임 시작 시 DB 저장 |
    62	| GAME | write-back | 진행 상태는 Redis에서 관리, GAME_FINISHED 시 DB 저장 |
    63	| GAME_PLAYER | write-back | 진행 중 점수/상태는 Redis에서 관리, GAME_FINISHED 시 DB 저장 |
    64	| GAME_BAN | write-back | 진행 중 밴/픽은 Redis에서 관리, GAME_FINISHED 시 DB 저장 |
    65	| GAME_PICK | write-back | 진행 중 밴/픽은 Redis에서 관리, GAME_FINISHED 시 DB 저장 |

thinking
**Assessing duplicate normative rules**
exec
/bin/zsh -lc "cd /Users/kanggyeonggu/Documents/league-of-algologic && nl -ba 06_BACKEND/BE_CONVENTIONS.md | sed -n '20,48p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 53ms:
    20	- 폴더명은 `kebab-case`를 사용한다.
    21	- 도메인 모듈 밖에 비즈니스 로직을 두지 않는다.
    22	- 공통 유틸은 `src/common`에만 둔다.
    23	
    24	---
    25	## 3. Spring 규칙
    26	- DI는 생성자 주입을 사용한다(필드 주입 금지).
    27	- `@RestController`, `@Service`, `@Repository` 역할을 명확히 분리한다.
    28	- `@Transactional`은 Service 레이어에서만 사용한다.
    29	- Entity를 API 응답으로 직접 노출하지 않는다(DTO 사용).
    30	
    31	---
    32	## 4. 에러 처리 규칙
    33	- 에러 코드는 [[03_API/CONTRACT/REST/ERROR_MODEL.md]]만 사용한다.
    34	- HTTP 상태 코드는 [[03_API/CONTRACT/REST/CONVENTIONS.md]] 규칙을 따른다.
    35	- 에러 메시지는 로그용이며 클라이언트 노출 금지.
    36	
    37	---
    38	## 5. 시간/ID 규칙
    39	- 모든 시간은 ISO-8601 UTC 문자열을 사용한다.

thinking
**Assessing conflict severities**
exec
/bin/zsh -lc 'date -u +%Y-%m-%dT%H:%M:%SZ' in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
2026-02-12T12:21:44Z

thinking
**Adjusting start time and commentary updates**
codex
{"run_id":"20260212-211025","agent_id":"duplication-auditor","task_id":"DUP-NORMATIVE","target":{"kind":"duplication","id":"NORMATIVE_DUPLICATION"},"status":"warn","summary":"Evidence collection is complete. I’m assembling the final severity-gated findings with exact paths/lines and conflict rationale.","findings":[],"metrics":{"files_scanned":67,"links_checked":0,"relations_checked":3},"started_at":"2026-02-12T12:10:25Z","finished_at":"2026-02-12T12:21:44Z"}

thinking
**Summarizing high-severity normative conflicts**
codex
{"run_id":"20260212-211025","agent_id":"duplication-auditor","task_id":"DUP-NORMATIVE","target":{"kind":"duplication","id":"NORMATIVE_DUPLICATION"},"status":"fail","summary":"Detected duplicated/conflicting normative rules across SSOT areas, including one high-severity conflict on UI message SSOT ownership/keyspace that creates mutually incompatible implementation guidance.","findings":[{"severity":"high","code":"NORMATIVE_CONFLICT_UI_MESSAGE_SSOT","message":"UI message source-of-truth rules conflict across PRODUCT and FRONTEND: one rule requires all UI text to come from COPY_TEXT keys, while another defines a separate notification-message SSOT with ERROR/NOTICE keyspace and localized text in FRONTEND docs.","dedupe_key":"ui-message-ssot-conflict","evidence":[{"path":"01_PRODUCT/COPY_TEXT.md","line":2,"snippet":"- UI 문구는 이 파일이 단일 진실"},{"path":"05_FRONTEND/FE_CONVENTIONS.md","line":54,"snippet":"- 모든 문구는 [[01_PRODUCT/COPY_TEXT.md]] 키를 사용한다."},{"path":"05_FRONTEND/FE_API_CLIENT.md","line":34,"snippet":"- UI 메시지는 [[01_PRODUCT/COPY_TEXT.md]] 키로만 표시한다."},{"path":"05_FRONTEND/FE_NOTIFICATION_MESSAGES.md","line":2,"snippet":"- 알림 컴포넌트에서 사용하는 메시지 키와 한국어 문구를 단일 문서로 정의한다."},{"path":"05_FRONTEND/FE_NOTIFICATION_MESSAGES.md","line":3,"snippet":"- 에러 알림은 `ERROR.<CODE>` 키를 사용한다."},{"path":"05_FRONTEND/FE_STATE_RULES.md","line":46,"snippet":"- 이벤트 기반 알림은 `NOTICE.*` 키를 사용한다."}],"proposed_fix":"Define one canonical ownership model: either (a) move ERROR/NOTICE message keys and localized strings into 01_PRODUCT/COPY_TEXT.md and make FE docs reference-only, or (b) carve out explicit notification exceptions in FE_CONVENTIONS/FE_API_CLIENT and update 01_PRODUCT/COPY_TEXT.md scope text accordingly."},{"severity":"medium","code":"NORMATIVE_CONFLICT_WRITEBACK_TIMING","message":"Write-back timing guidance is internally conflicting for ROOM* entities: some docs require game-start DB flush, while DB_NOTES states write-back as end-of-game reflection.","dedupe_key":"writeback-timing-conflict-room-entities","evidence":[{"path":"04_DOMAIN/DATA_MODEL.md","line":58,"snippet":"| ROOM | write-back | 로비 상태는 Redis에서 관리, 게임 시작 시 DB 스냅샷 저장 |"},{"path":"04_DOMAIN/DATA_MODEL.md","line":60,"snippet":"| ROOM_KICK | write-back | 로비 단계 기록은 Redis에 유지, 게임 시작 시 DB 저장 |"},{"path":"04_DOMAIN/REDIS_DB_TIMING.md","line":26,"snippet":"| Phase 1: 게임 시작 | startGame | 스냅샷 고정 | 1차 DB flush | ROOM, ROOM_PLAYER, ROOM_KICK, ROOM_HOST_HISTORY, GAME, GAME_PLAYER |"},{"path":"04_DOMAIN/DB_NOTES.md","line":105,"snippet":"- 예외: ROOM, ROOM_PLAYER, ROOM_KICK, ROOM_HOST_HISTORY, GAME, GAME_PLAYER, GAME_BAN, GAME_PICK은 write-back(종료 시 DB 반영)."},{"path":"04_DOMAIN/DB_NOTES.md","line":106,"snippet":"- 최종 기준은 DATA_MODEL.md의 Write Policy 매핑을 따른다."}],"proposed_fix":"Normalize DB_NOTES.md to the same phase-specific timing as DATA_MODEL.md/REDIS_DB_TIMING.md (game-start flush for ROOM* lobby artifacts, GAME_FINISHED flush for game-progress artifacts), or replace the conflicting sentence with a direct reference to DATA_MODEL.md mapping only."},{"severity":"low","code":"NORMATIVE_DUPLICATION_SCALING_BASELINE","message":"The same normative scaling statement ('1920x1080 is conversion baseline, not fixed resolution rule') is duplicated across DESIGN and FRONTEND docs despite FRONTEND already declaring DESIGN as source-of-truth, increasing drift risk.","dedupe_key":"dup-scaling-baseline-1920","evidence":[{"path":"02_DESIGN/TYPOGRAPHY_SYSTEM.md","line":5,"snippet":"- 1920x1080은 **환산 기준**이며 고정 해상도 규칙이 아니다."},{"path":"05_FRONTEND/FE_STYLING.md","line":3,"snippet":"- 디자인의 단일 진실은 [[02_DESIGN/COLOR_SYSTEM.md]], [[02_DESIGN/TYPOGRAPHY_SYSTEM.md]]이며, 본 문서는 적용 방식만 기술한다."},{"path":"05_FRONTEND/FE_STYLING.md","line":12,"snippet":"- 1920x1080은 **환산 기준**이며 고정 해상도 규칙이 아니다."},{"path":"05_FRONTEND/FE_CONVENTIONS.md","line":47,"snippet":"- 1920x1080은 **환산 기준**이며 고정 해상도 규칙이 아니다."}],"proposed_fix":"Keep the normative baseline in DESIGN docs only, and in FRONTEND docs replace duplicated normative text with a short reference pointer to the DESIGN source."}],"metrics":{"files_scanned":67,"links_checked":0,"relations_checked":3},"started_at":"2026-02-12T12:10:25Z","finished_at":"2026-02-12T12:21:44Z"}
tokens used
124,653
