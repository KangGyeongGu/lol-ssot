OpenAI Codex v0.99.0 (research preview)
--------
workdir: /Users/kanggyeonggu/Documents/league-of-algologic
model: gpt-5.3-codex
provider: openai
approval: never
sandbox: workspace-write [workdir, /tmp, $TMPDIR]
reasoning effort: xhigh
reasoning summaries: auto
session id: 019c51c2-7a43-7b10-bfea-26897ce9be8c
--------
user
You are a specialized SSOT audit worker.

Mission:
- Agent ID: area-auditor
- Task ID: AREA-03_API
- Target Kind: area
- Target ID: 03_API
- Objective: Validate API contract area integrity and page map alignment.

Execution Rules:
- Audit only the provided scope paths.
- Do not modify or create repository files.
- Use shell read commands as needed to inspect markdown and agent files.
- When evidence exists, provide precise file paths and optional line numbers.
- If no issue is found, return an empty findings array and status pass.

Severity Policy:
- critical: missing mandatory references or hard SSOT violations
- high: mapping/wiring mismatch causing incorrect orchestration
- medium: relationship drift, weak traceability, or ambiguous ownership
- low: minor documentation quality concerns

Output Contract:
- Return ONLY a JSON object matching the provided output schema.
- No markdown fences, no commentary, no prose outside JSON.

Worker Request JSON:
{
  "run_id": "20260212-211025",
  "agent_id": "area-auditor",
  "task_id": "AREA-03_API",
  "repo_root": "/Users/kanggyeonggu/Documents/league-of-algologic",
  "mode": "full",
  "changed_files": [],
  "target": {
    "kind": "area",
    "id": "03_API",
    "scope_paths": [
      "03_API"
    ],
    "checks": [
      "required_docs",
      "broken_links",
      "contract_completeness",
      "page_map_contract_alignment"
    ],
    "objective": "Validate API contract area integrity and page map alignment."
  },
  "severity_policy": {
    "fail_on": "high"
  },
  "output_path": "/Users/kanggyeonggu/Documents/league-of-algologic/AGENTS/CODEX/reports/ssot-spec-audit/20260212-211025/worker_results/AREA-03_API.worker.json"
}
mcp startup: no servers
2026-02-12T12:10:25.748323Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-d0d7-7c01-9d9a-03891d2c6d05
2026-02-12T12:10:25.775369Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-9887-76b1-8a51-bcf3d924cc4c
2026-02-12T12:10:25.811609Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-38ee-7ba2-a962-612dc878cb48
2026-02-12T12:10:25.837706Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-467c-72d3-a3b1-d7a5a430ccef
2026-02-12T12:10:25.870353Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-cc9d-7a62-9a23-c4a89638f2aa
2026-02-12T12:10:25.894585Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-ce91-7eb1-b1ba-acb58528a4c4
2026-02-12T12:10:25.917569Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-38ea-72b0-bdf8-e40ebceaa511
2026-02-12T12:10:25.941022Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-cc9e-7251-bef6-72ab459d6295
2026-02-12T12:10:25.962229Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-f756-70d0-979e-f3d19e6b4765
2026-02-12T12:10:25.984198Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-f6e8-7312-87a5-1bf02f68e683
2026-02-12T12:10:26.008760Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4876-72e1-8344-2def65ab0e2e
2026-02-12T12:10:26.021822Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-48b9-7cf0-bb8f-0727ecae471c
2026-02-12T12:10:26.046949Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4930-7b12-b5a6-09a3f990fa01
2026-02-12T12:10:26.070294Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-38ea-7463-ae40-c7cb687f7c1e
2026-02-12T12:10:26.093989Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-fa75-7c02-93b7-0ff3016651ff
2026-02-12T12:10:26.117765Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-cc9e-7160-86f1-edd523e80eda
2026-02-12T12:10:26.142307Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-d227-7931-8880-0db3cd452657
2026-02-12T12:10:26.167421Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4893-7892-ab52-2b5e47dc4b6a
2026-02-12T12:10:26.192013Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-38ea-77e0-959f-41e255a92e73
2026-02-12T12:10:26.216695Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-f78e-7f63-8b6a-6989a20dbee4
2026-02-12T12:10:26.241930Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-cc9c-7ae3-b325-a3e92ca31ab8
2026-02-12T12:10:26.264805Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-f858-7832-915b-32b1bbc4a668
2026-02-12T12:10:26.288889Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4889-7083-a7bb-3036c26e479e
2026-02-12T12:10:26.313151Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4ad5-7921-bbb9-6d8219c8e00f
2026-02-12T12:10:26.338467Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-ceef-7700-964a-e875524422b3
2026-02-12T12:10:26.364070Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-ce91-70c0-81cc-845a16dc3090
2026-02-12T12:10:26.389391Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-467b-7a32-a5aa-cc1b16737fd3
2026-02-12T12:10:26.413030Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-d087-7b72-810f-c7f9cae8997e
2026-02-12T12:10:26.437781Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-d12a-7c03-ae0e-de466063265b
2026-02-12T12:10:26.462802Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-cf47-78d1-bfd8-856010e0b88b
2026-02-12T12:10:26.488155Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-f72e-7832-829c-5dc1786d64e1
2026-02-12T12:10:26.514341Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-467e-73d0-b85f-f37742148125
2026-02-12T12:10:26.539692Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-3937-76b2-a6cc-f97d68083e72
2026-02-12T12:10:26.564393Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-467c-7e83-8a93-8be1e16e8d6f
2026-02-12T12:10:26.589801Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4bef-7ed0-8cba-d1ace7970ba2
2026-02-12T12:10:26.615287Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-97ee-7b60-b23e-e08772246435
2026-02-12T12:10:26.639698Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-cefd-7d71-8e38-596fba5ee0fa
2026-02-12T12:10:26.665157Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4a5a-7433-8dd2-1a6692ba5030
2026-02-12T12:10:26.689490Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-995e-7492-8c9d-07b4d289699a
2026-02-12T12:10:26.712497Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4be1-7322-a4ca-af563f4648a1
2026-02-12T12:10:26.737771Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4b44-7932-b08e-3d01c68ac40d
2026-02-12T12:10:26.762645Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51bd-0e3d-7023-859d-48e6711a7edc
2026-02-12T12:10:26.786609Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-97fe-7fb3-96d8-40e3f7846860
2026-02-12T12:10:26.811407Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-ce91-71c2-ab93-0e7477f1db36
2026-02-12T12:10:26.835978Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-38ea-7343-9ed5-7e439c2f4971
2026-02-12T12:10:26.861121Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-d111-7f32-ba2e-7fb437b66b8d
2026-02-12T12:10:26.886372Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-d2a5-77d0-814d-abc1f8cc15cd
2026-02-12T12:10:26.911538Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-d199-7bc1-8e8d-c5388afdccf8
2026-02-12T12:10:26.936488Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-cca6-7652-95a9-9848df23bbf0
2026-02-12T12:10:26.961363Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-492a-7c30-9fcd-1011dc30505a
2026-02-12T12:10:26.986810Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-99a4-75f0-9861-0af58a0c2eb0
2026-02-12T12:10:27.011102Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-467e-7bc1-8c89-68dc759750a4
2026-02-12T12:10:27.036449Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51be-96ff-7c81-a003-23d93283cfcb
2026-02-12T12:10:27.061197Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4a44-73b3-8ed5-d69e2b402611
2026-02-12T12:10:27.086448Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51bf-5589-7183-8f76-bb3c1765fbff
2026-02-12T12:10:27.111165Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-4a98-7dc1-801f-3d18906a496d
2026-02-12T12:10:27.136471Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-cc9c-7002-91ff-96e6baf61715
2026-02-12T12:10:27.161852Z ERROR codex_core::rollout::list: state db missing rollout path for thread 019c51c1-467b-71d0-b19c-c6ecbac8a9b5

thinking
**Starting SSOT audit with parallel execution**
codex
{"run_id":"20260212-211025","agent_id":"area-auditor","task_id":"AREA-03_API","target":{"kind":"area","id":"03_API"},"status":"warn","summary":"Starting AREA-03_API audit. I’ll inspect files under `03_API`, verify required docs, links, and contract/page-map alignment, then return a strict JSON result.","findings":[],"metrics":{"files_scanned":0,"links_checked":0,"relations_checked":0},"started_at":"2026-02-12T00:00:00Z","finished_at":"2026-02-12T00:00:00Z"}

thinking
**Clarifying commentary format and next step**
codex
{"run_id":"20260212-211025","agent_id":"area-auditor","task_id":"AREA-03_API","target":{"kind":"area","id":"03_API"},"status":"warn","summary":"Using the `ssot-spec-audit` skill workflow for this task and reading its instructions now.","findings":[],"metrics":{"files_scanned":0,"links_checked":0,"relations_checked":0},"started_at":"2026-02-12T00:00:00Z","finished_at":"2026-02-12T00:00:00Z"}

thinking
**Switching to plain text format**
exec
/bin/zsh -lc "sed -n '1,220p' .codex-home/skills/ssot-spec-audit/SKILL.md" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 50ms:
---
name: ssot-spec-audit
description: Run a multi-agent SSOT consistency audit by orchestrating multiple Codex worker contexts in parallel. Use when you need area-level validation, cross-area relation checks, duplication/conflict detection, agent-skill wiring checks, and consolidated severity-gated reports.
---

# SSOT Spec Audit

## Overview

Run one orchestrator command that fans out into multiple Codex worker executions (`codex exec`) and aggregates results.

Worker groups:
- Area auditors (`01_PRODUCT` to `06_BACKEND`)
- Relation auditors (area-to-area required relationships)
- Duplication auditors (duplicate/conflicting norms and ownership violations)
- Agent-spec auditors (agent/skill role, mapping, reference completeness)
- Traceability auditor (end-to-end requirement traceability)

## Run


thinking
**Planning audit references inspection**
codex
{"run_id":"20260212-211025","agent_id":"area-auditor","task_id":"AREA-03_API","target":{"kind":"area","id":"03_API"},"status":"warn","summary":"Loaded the skill instructions. Next I’m reading audit rules and schema details to apply the required checks consistently for `03_API`.","findings":[],"metrics":{"files_scanned":1,"links_checked":0,"relations_checked":0},"started_at":"2026-02-12T00:00:00Z","finished_at":"2026-02-12T00:00:00Z"}

thinking
**Confirming JSON output expectation**
exec
/bin/zsh -lc "sed -n '1,260p' AGENTS/CODEX/SKILLS/ssot-spec-audit/references/audit-rules.md" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "sed -n '1,260p' AGENTS/CODEX/SKILLS/ssot-spec-audit/schemas/worker_result.schema.json" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "sed -n '1,260p' AGENTS/CODEX/SKILLS/ssot-spec-audit/references/multi-agent-system.md" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 51ms:
# Audit Rules

## Multi-Agent Scope

One orchestrator run dispatches multiple worker contexts.

1. `area-auditor`
- targets: `01_PRODUCT`, `02_DESIGN`, `03_API`, `04_DOMAIN`, `05_FRONTEND`, `06_BACKEND`
- checks: required docs, link integrity, area boundary ownership, intra-area consistency

2. `relation-auditor`
- targets: PRODUCT_DESIGN, PRODUCT_API, DESIGN_FRONTEND, API_FRONTEND, API_BACKEND, DOMAIN_API, DOMAIN_BACKEND
- checks: required relationship presence, reference directionality, relation-level duplication/conflict

3. `duplication-auditor`
- targets: NORMATIVE_DUPLICATION, TERM_CONFLICT, OWNERSHIP_VIOLATION
- checks: duplicated/contradictory rules, conflicting glossary terms, SSOT ownership violations

4. `agent-spec-auditor`
- targets: backend and frontend agent/skill trees
 succeeded in 51ms:
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "WorkerResult",
  "type": "object",
  "required": [
    "run_id",
    "agent_id",
    "task_id",
    "target",
    "status",
    "summary",
    "findings",
    "metrics",
    "started_at",
    "finished_at"
  ],
  "properties": {
    "run_id": {
      "type": "string",
      "minLength": 8
 succeeded in 51ms:
# Multi-Agent System Design

## Agent Inventory

| agent_id | target kind | fan-out |
|---|---|---:|
| area-auditor | area | 6 |
| relation-auditor | relation | 7 |
| duplication-auditor | duplication | 3 |
| agent-spec-auditor | agent_spec | 2 |
| traceability-auditor | traceability | 1 |
| aggregator (orchestrator internal) | all | 1 |
| gatekeeper (orchestrator internal) | all | 1 |

## Execution Sequence

```mermaid
flowchart TD
  U[User] --> O[orchestrate_multi_agent_audit.py]
  O --> Q[Build task queue]

thinking
**Planning API docs inspection**
codex
{"run_id":"20260212-211025","agent_id":"area-auditor","task_id":"AREA-03_API","target":{"kind":"area","id":"03_API"},"status":"warn","summary":"I’m mapping the exact validation criteria from the audit scripts (required docs and page-map/contract checks) before scoring `03_API`.","findings":[],"metrics":{"files_scanned":3,"links_checked":0,"relations_checked":0},"started_at":"2026-02-12T00:00:00Z","finished_at":"2026-02-12T00:00:00Z"}

thinking
**Attempting parallel rg commands**
exec
/bin/zsh -lc 'rg --files 03_API' in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc 'rg -n "required_docs|required docs|page_map|page map|contract alignment|03_API|area-auditor" AGENTS/CODEX/SKILLS/ssot-spec-audit -S' in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
03_API/PAGE_MAP/MY_PAGE.md
03_API/PAGE_MAP/SIGNUP.md
03_API/PAGE_MAP/IN_GAME.md
03_API/PAGE_MAP/BAN_PICK_SHOP.md
03_API/PAGE_MAP/MAIN.md
03_API/PAGE_MAP/ROOM_LIST.md
03_API/PAGE_MAP/WELCOME.md
03_API/PAGE_MAP/WAITING_ROOM.md
03_API/PAGE_MAP/RESULT.md
03_API/README.md
03_API/CONTRACT/REST/AUTH_GUARDS.md
03_API/CONTRACT/REST/OPENAPI.yaml.md
03_API/CONTRACT/REST/ERROR_MODEL.md
03_API/CONTRACT/REST/API_SUMMARY.md
03_API/CONTRACT/REST/CONVENTIONS.md
03_API/CONTRACT/REALTIME/EVENTS.md
03_API/CONTRACT/REALTIME/COMMANDS.md
03_API/CONTRACT/REALTIME/CONVENTIONS.md
03_API/CONTRACT/REALTIME/TOPICS.md
03_API/LIFECYCLE.md
 succeeded in 52ms:
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:52:            agent_id="area-auditor",
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:57:                "required_docs",
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:66:            agent_id="area-auditor",
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:71:                "required_docs",
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:79:            task_id="AREA-03_API",
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:80:            agent_id="area-auditor",
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:82:            target_id="03_API",
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:83:            scope_paths=["03_API"],
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:85:                "required_docs",
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:88:                "page_map_contract_alignment",
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:90:            objective="Validate API contract area integrity and page map alignment.",
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:94:            agent_id="area-auditor",
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:99:                "required_docs",
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:108:            agent_id="area-auditor",
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:113:                "required_docs",
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:122:            agent_id="area-auditor",
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:127:                "required_docs",
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:155:            scope_paths=["01_PRODUCT", "03_API"],
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:181:            scope_paths=["03_API", "05_FRONTEND"],
AGENTS/CODEX/SKILLS/ssot-spec-audit/scripts/orchestrate_multi_agent_audit.py:194:            scope_paths=["03_API", "06_BACKEND"],

thinking
**Planning documentation audit**
codex
{"run_id":"20260212-211025","agent_id":"area-auditor","task_id":"AREA-03_API","target":{"kind":"area","id":"03_API"},"status":"warn","summary":"I identified the full `03_API` document set and will now validate required references from `README`, REST/Realtime contracts, and page-map mappings.","findings":[],"metrics":{"files_scanned":20,"links_checked":0,"relations_checked":0},"started_at":"2026-02-12T00:00:00Z","finished_at":"2026-02-12T00:00:00Z"}

thinking
**Planning parallel file inspection**
exec
/bin/zsh -lc "sed -n '1,260p' 03_API/README.md" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "sed -n '1,260p' 03_API/LIFECYCLE.md" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "sed -n '1,260p' 03_API/CONTRACT/REST/API_SUMMARY.md" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "sed -n '1,260p' 03_API/CONTRACT/REST/OPENAPI.yaml.md" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 51ms:
**목적**
- REST/실시간 계약과 페이지 맵의 단일 진실(SSOT)을 정의한다.
- 프론트/백엔드 구현은 반드시 이 계약을 기준으로 한다.

**범위**
- 포함: OpenAPI, REST 규약, 실시간 규약, 페이지별 계약 매핑, 라이프사이클
- 제외: 구현 코드, DB 모델 세부 설계

**파일 구조**
```text
03_API/
  README.md # 이 문서
  LIFECYCLE.md # 로그인/복귀/게임 진행 흐름 기준
  CONTRACT/
    REST/
      API_SUMMARY.md # REST API 요약
      AUTH_GUARDS.md # 인증/인가 가드 규칙
      CONVENTIONS.md # REST 공통 규약
      ERROR_MODEL.md # 에러 모델 규칙
      OPENAPI.yaml.md # REST API 스키마(OpenAPI)
 succeeded in 51ms:
## 0. 문서 목적
- REST/실시간 통신의 연결/구독/해제/호출 타이밍을 페이지 단위로 정의한다.
- REST는 스냅샷/명령, WebSocket은 상태 변화 이벤트를 담당한다.

## 관련 문서
- [[01_PRODUCT/USER_FLOWS.md]]
- [[03_API/CONTRACT/REST/OPENAPI.yaml.md]]
- [[03_API/CONTRACT/REALTIME/CONVENTIONS.md]]
- [[03_API/CONTRACT/REALTIME/TOPICS.md]]

---
## 1. 전제
- WebSocket endpoint: `/ws`
- 인증: `Authorization: Bearer <JWT>`
- 공통 Envelope/type 규칙은 REALTIME_CONVENTIONS를 따른다.
- active game은 FINISHED 시점에 즉시 해제된다.
  - RESULT 화면은 이벤트 기반으로 표시하되, 재접속 시 강제 복귀되지 않는다.

---
## 2. 연결 및 기본 구독
 succeeded in 51ms:
## 0. 작업 양식
엔드포인트/스키마 추가 시 아래 절차를 따른다.

```
[변경 목적]
- 왜 필요한가

[스키마 변경]
- 추가/수정 스키마 명

[엔드포인트 변경]
- METHOD /path
- 요청/응답 스키마
- 가능한 에러 코드

[동기화 체크]
- CONVENTIONS.md
- AUTH_GUARDS.md
- ERROR_MODEL.md
- API_SUMMARY.md
 succeeded in 51ms:
## 0. 작업 양식
새 엔드포인트 추가 시 아래 양식을 유지한다.

```
[기능]
- 한 줄 요약

[메서드 / 엔드포인트]
- METHOD /path

[설명]
- 스냅샷인지 명령인지
- 주요 입력 파라미터
- 주요 에러 코드
```

---
## 1. 문서 목적
- REST 엔드포인트를 사람이 빠르게 이해/검토하기 위한 요약 문서.
- 정확한 계약과 스키마는 OPENAPI.yaml.md가 단일 진실이다.

thinking
**Planning expanded OpenAPI extraction**
exec
/bin/zsh -lc 'wc -l 03_API/CONTRACT/REST/OPENAPI.yaml.md' in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
    1990 03_API/CONTRACT/REST/OPENAPI.yaml.md

thinking
**Planning endpoint mapping extraction**
codex
{"run_id":"20260212-211025","agent_id":"area-auditor","task_id":"AREA-03_API","target":{"kind":"area","id":"03_API"},"status":"warn","summary":"I’m now checking each `PAGE_MAP` document against REST/Realtime contracts to find missing or inconsistent route/topic references.","findings":[],"metrics":{"files_scanned":24,"links_checked":0,"relations_checked":0},"started_at":"2026-02-12T00:00:00Z","finished_at":"2026-02-12T00:00:00Z"}

thinking
**Extracting endpoint references**
exec
/bin/zsh -lc 'rg -n "/(auth|users|rooms|games|catalog|stats|topic|user/queue|ws)" 03_API/PAGE_MAP/*.md' in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "rg -n \"\\[\\[["'^'"\\]]+\\]\\]\" 03_API/**/*.md" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 51ms:
03_API/LIFECYCLE.md:6:- [[01_PRODUCT/USER_FLOWS.md]]
03_API/LIFECYCLE.md:7:- [[03_API/CONTRACT/REST/OPENAPI.yaml.md]]
03_API/LIFECYCLE.md:8:- [[03_API/CONTRACT/REALTIME/CONVENTIONS.md]]
03_API/LIFECYCLE.md:9:- [[03_API/CONTRACT/REALTIME/TOPICS.md]]
03_API/CONTRACT/REST/OPENAPI.yaml.md:30:- [[03_API/CONTRACT/REST/API_SUMMARY.md]]
03_API/CONTRACT/REST/OPENAPI.yaml.md:31:- [[03_API/CONTRACT/REST/CONVENTIONS.md]]
03_API/CONTRACT/REST/OPENAPI.yaml.md:32:- [[03_API/CONTRACT/REST/AUTH_GUARDS.md]]
03_API/CONTRACT/REST/OPENAPI.yaml.md:33:- [[03_API/CONTRACT/REST/ERROR_MODEL.md]]
03_API/PAGE_MAP/BAN_PICK_SHOP.md:5:- [[03_API/CONTRACT/REST/OPENAPI.yaml.md]]
03_API/PAGE_MAP/BAN_PICK_SHOP.md:6:- [[03_API/CONTRACT/REALTIME/TOPICS.md]]
03_API/PAGE_MAP/BAN_PICK_SHOP.md:7:- [[03_API/CONTRACT/REALTIME/EVENTS.md]]
03_API/PAGE_MAP/BAN_PICK_SHOP.md:8:- [[03_API/CONTRACT/REALTIME/COMMANDS.md]]
03_API/PAGE_MAP/MY_PAGE.md:5:- [[03_API/CONTRACT/REST/OPENAPI.yaml.md]]
03_API/PAGE_MAP/IN_GAME.md:5:- [[03_API/CONTRACT/REST/OPENAPI.yaml.md]]
03_API/PAGE_MAP/IN_GAME.md:6:- [[03_API/CONTRACT/REALTIME/TOPICS.md]]
03_API/PAGE_MAP/IN_GAME.md:7:- [[03_API/CONTRACT/REALTIME/EVENTS.md]]
03_API/PAGE_MAP/IN_GAME.md:8:- [[03_API/CONTRACT/REALTIME/COMMANDS.md]]
03_API/PAGE_MAP/WAITING_ROOM.md:5:- [[03_API/CONTRACT/REST/OPENAPI.yaml.md]]
03_API/PAGE_MAP/WAITING_ROOM.md:6:- [[03_API/CONTRACT/REALTIME/TOPICS.md]]
03_API/PAGE_MAP/WAITING_ROOM.md:7:- [[03_API/CONTRACT/REALTIME/EVENTS.md]]
 succeeded in 51ms:
03_API/PAGE_MAP/WAITING_ROOM.md:14:| GET | /rooms/{roomId} | 플레이어 목록/방 설정/현재 상태 스냅샷 조회 |
03_API/PAGE_MAP/WAITING_ROOM.md:20:| READY | POST | /rooms/{roomId}/ready | 본인 상태 READY 전환 |
03_API/PAGE_MAP/WAITING_ROOM.md:21:| UNREADY | POST | /rooms/{roomId}/unready | 본인 상태 UNREADY 전환 |
03_API/PAGE_MAP/WAITING_ROOM.md:22:| 방 나가기 | POST | /rooms/{roomId}/leave | 성공 시 MAIN 복귀(필요 시 ROOM_LIST 패널 상태 진입) |
03_API/PAGE_MAP/WAITING_ROOM.md:23:| 게임 시작(방장) | POST | /rooms/{roomId}/start | 성공 시 ActiveGame(pageRoute) 기준 다음 화면 이동 |
03_API/PAGE_MAP/WAITING_ROOM.md:24:| 방장 위임(방장) | POST | /rooms/{roomId}/transfer-host | body.targetUserId 필수 |
03_API/PAGE_MAP/WAITING_ROOM.md:25:| 플레이어 강퇴(방장) | POST | /rooms/{roomId}/kick | body.targetUserId 필수 |
03_API/PAGE_MAP/WAITING_ROOM.md:32:| /topic/rooms/{roomId}/lobby | ROOM_PLAYER_JOINED | 입장자 슬롯 반영 |
03_API/PAGE_MAP/WAITING_ROOM.md:33:| /topic/rooms/{roomId}/lobby | ROOM_PLAYER_LEFT | 퇴장/강퇴 슬롯 반영 |
03_API/PAGE_MAP/WAITING_ROOM.md:34:| /topic/rooms/{roomId}/lobby | ROOM_PLAYER_STATE_CHANGED | READY/UNREADY/DISCONNECTED 반영 |
03_API/PAGE_MAP/WAITING_ROOM.md:35:| /topic/rooms/{roomId}/lobby | ROOM_HOST_CHANGED | 방장 변경 반영 |
03_API/PAGE_MAP/WAITING_ROOM.md:36:| /topic/rooms/{roomId}/lobby | ROOM_GAME_STARTED | 게임 시작 알림(게임 토픽 구독 전환 트리거) |
03_API/PAGE_MAP/WAITING_ROOM.md:37:| /topic/rooms/{roomId}/chat | CHAT_MESSAGE | 인게임(룸 스코프) 채팅 수신 |
03_API/PAGE_MAP/WAITING_ROOM.md:38:| /user/queue/rooms | ROOM_KICKED | 본인 강퇴 알림 처리 |
03_API/PAGE_MAP/WAITING_ROOM.md:39:| /user/queue/errors | ERROR | 실시간 명령 실패 처리 |
03_API/PAGE_MAP/WAITING_ROOM.md:51:- WAITING_ROOM 이탈 시 `/topic/rooms/{roomId}/lobby` 구독을 해제한다.
03_API/PAGE_MAP/WAITING_ROOM.md:52:- 룸 채팅(`/topic/rooms/{roomId}/chat`)은 BAN_PICK_SHOP/IN_GAME까지 동일 roomId 기준으로 유지 가능하다.
03_API/PAGE_MAP/BAN_PICK_SHOP.md:14:| GET | /games/{gameId}/state | 현재 stage/remainingMs/coin/inventory 조회 |
03_API/PAGE_MAP/BAN_PICK_SHOP.md:15:| GET | /catalog/algorithms | 밴/픽 선택 목록 조회 |
03_API/PAGE_MAP/BAN_PICK_SHOP.md:16:| GET | /catalog/items | 상점 아이템 목록(가격/지속시간) 조회 |
exec
/bin/zsh -lc 'rg -n "''^##|''^###|''^'"\\*\\*\" 03_API/PAGE_MAP/*.md" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
03_API/PAGE_MAP/IN_GAME.md:1:## 목적
03_API/PAGE_MAP/IN_GAME.md:4:## 관련 문서
03_API/PAGE_MAP/IN_GAME.md:11:## 1. 진입 시 REST
03_API/PAGE_MAP/IN_GAME.md:17:## 2. 사용자 액션 → REST
03_API/PAGE_MAP/IN_GAME.md:23:## 3. 실시간 구독/발행
03_API/PAGE_MAP/IN_GAME.md:24:### 3.1 구독
03_API/PAGE_MAP/IN_GAME.md:37:### 3.2 발행 (Command)
03_API/PAGE_MAP/IN_GAME.md:45:## 4. 이탈 시 처리
03_API/PAGE_MAP/MAIN.md:1:## 목적
03_API/PAGE_MAP/MAIN.md:4:## 관련 문서
03_API/PAGE_MAP/MAIN.md:11:## 1. 진입 전/진입 시 REST
03_API/PAGE_MAP/MAIN.md:20:## 2. 사용자 액션 → REST
03_API/PAGE_MAP/MAIN.md:27:## 3. 실시간 구독/발행
03_API/PAGE_MAP/MAIN.md:28:### 3.1 구독
03_API/PAGE_MAP/MAIN.md:35:### 3.2 발행 (Command)
03_API/PAGE_MAP/MAIN.md:41:## 4. 이탈 시 처리
03_API/PAGE_MAP/BAN_PICK_SHOP.md:1:## 목적
03_API/PAGE_MAP/BAN_PICK_SHOP.md:4:## 관련 문서
03_API/PAGE_MAP/BAN_PICK_SHOP.md:11:## 1. 진입 시 REST
03_API/PAGE_MAP/BAN_PICK_SHOP.md:20:## 2. 사용자 액션 → REST

thinking
**Scoping link audit within API area**
exec
/bin/zsh -lc "sed -n '1,280p' 03_API/CONTRACT/REALTIME/TOPICS.md" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 50ms:
## 0. 문서 목적
- 실시간(WebSocket/STOMP) 구독 대상과 범위를 정의한다.
- 상세 이벤트/명령 형식은 EVENTS/COMMANDS 문서를 따른다.

## 관련 문서
- [[03_API/CONTRACT/REALTIME/EVENTS.md]]

---
## 1. 기본 규칙
- Prefix 규칙은 REALTIME_CONVENTIONS를 따른다.
- 초기 스냅샷은 REST로 조회하고, 이후 변경분은 이벤트로 동기화한다.
- room/game 구독은 해당 리소스에 참여한 사용자만 허용된다.
- 예외: `/topic/rooms/list`는 로그인 사용자 전역 구독을 허용한다.

---
## 2. Topic 목록
| Topic | 범위 | 주요 이벤트 | 설명 |
|---|---|---|---|
| /topic/chat/global | GLOBAL | CHAT_MESSAGE | 메인 전역 채팅 |
| /topic/rooms/list | GLOBAL | ROOM_LIST_UPSERT, ROOM_LIST_REMOVED | 방 목록 델타 변경(생성/삭제/상태 갱신) |
exec
/bin/zsh -lc "sed -n '1,320p' 03_API/CONTRACT/REALTIME/EVENTS.md" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "sed -n '1,320p' 03_API/CONTRACT/REALTIME/COMMANDS.md" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "sed -n '1,320p' 03_API/CONTRACT/REALTIME/CONVENTIONS.md" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
## 0. 문서 목적
- 실시간 명령(클라이언트 → 서버)의 타입과 payload를 정의한다.
- Command Envelope는 REALTIME_CONVENTIONS를 따른다.

## 관련 문서
- [[03_API/CONTRACT/REALTIME/CONVENTIONS.md]]
- [[03_API/CONTRACT/REALTIME/EVENTS.md]]

---
## 1. 공통 규칙
- REST로 처리하는 명령: 밴/픽/구매/제출.
- WebSocket 명령: 채팅, 아이템/스펠 사용.
- 성공 응답은 이벤트로 브로드캐스트된다.
- 실패는 `/user/queue/errors`로 ERROR 이벤트를 반환한다.

### 1.1 CommandType 목록
- CHAT_SEND
- ITEM_USE
- SPELL_USE

 succeeded in 52ms:
## 0. 문서 목적
- 이 문서는 실시간(WebSocket/STOMP) 통신 규칙을 정의한다.
- 채팅/단계 전환 알림/아이템 효과는 본 문서와 EVENT/COMMAND/ TOPIC 문서를 따른다.
- REST는 스냅샷 + 명령만 담당한다.

## 관련 문서
- [[03_API/CONTRACT/REALTIME/TOPICS.md]]
- [[03_API/CONTRACT/REALTIME/EVENTS.md]]
- [[03_API/CONTRACT/REALTIME/COMMANDS.md]]

---
## 1. 전송 방식
- WebSocket 기반 실시간 통신을 사용한다.
- STOMP 사용을 전제로 하며, 아래 destination 규칙을 따른다.

### 1.1 Prefix
- Publish(서버 → 클라이언트): `/topic/**`
- User Queue(서버 → 특정 사용자): `/user/queue/**`
- Command(클라이언트 → 서버): `/app/**`

 succeeded in 52ms:
## 0. 문서 목적
- 실시간 이벤트 타입과 payload를 정의한다.
- Event Envelope는 REALTIME_CONVENTIONS를 따른다.

## 관련 문서
- [[03_API/CONTRACT/REALTIME/CONVENTIONS.md]]
- [[03_API/CONTRACT/REALTIME/TOPICS.md]]

---
## 1. 공통 규칙
- 모든 ID는 문자열(userId, roomId, gameId 등).
- Enum 값은 UPPER_SNAKE_CASE.
- 시간은 ISO-8601 UTC 문자열.
- remainingMs는 `stage_deadline_at - meta.serverTime` 기반 파생값이다.

### 1.1 EventType 목록
- ERROR
- CHAT_MESSAGE
- TIME_SYNC
- ROOM_LIST_UPSERT

thinking
**Checking for missing docs and links**
exec
/bin/zsh -lc "sed -n '1,320p' 03_API/CONTRACT/REST/AUTH_GUARDS.md" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "sed -n '1,320p' 03_API/CONTRACT/REST/ERROR_MODEL.md" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "sed -n '1,320p' 03_API/CONTRACT/REST/CONVENTIONS.md" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 50ms:
## 0. 작업 양식
아래 양식으로 변경 내용을 기록하고, 연관 문서를 함께 갱신한다.

```
[변경 목적]
- 무엇을 왜 바꾸는가

[변경 내용]
- 규칙/정책/포맷 변경 요약

[연관 문서 업데이트]
- OPENAPI.yaml.md
- ERROR_MODEL.md
- AUTH_GUARDS.md
- API_SUMMARY.md

[검토 체크리스트]
- 규칙 충돌 없음
- 예시 최신화
- OpenAPI/요약 동기화
 succeeded in 51ms:
## 0. 작업 양식
신규 에러 코드를 추가할 때는 아래 항목을 반드시 기입한다.

```
[코드]
- CODE_NAME

[의미]
- 언제 발생하는가

[HTTP 상태 코드]
- 4xx/5xx

[details.context]
- 포함해야 하는 필드

[영향 범위]
- 관련 엔드포인트
```

 succeeded in 51ms:
## 0. 작업 양식
가드 규칙 추가/수정 시 아래 양식으로 기록한다.

```
[가드 목적]
- 왜 필요한가

[적용 대상]
- 엔드포인트 / 조건 / 단계

[실패 응답]
- HTTP Status
- error.code
- details.context

[연관 문서 업데이트]
- OPENAPI.yaml.md
- ERROR_MODEL.md
- API_SUMMARY.md
```

thinking
**Reviewing page map documentation**
exec
/bin/zsh -lc 'for f in 03_API/PAGE_MAP/*.md; do echo "===== $f ====="; sed -n '"'1,220p' \""'$f"; done' in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
===== 03_API/PAGE_MAP/BAN_PICK_SHOP.md =====
## 목적
- BAN/PICK/SHOP 단일 페이지(RANKED 전용)의 REST/실시간 매핑을 정의한다.

## 관련 문서
- [[03_API/CONTRACT/REST/OPENAPI.yaml.md]]
- [[03_API/CONTRACT/REALTIME/TOPICS.md]]
- [[03_API/CONTRACT/REALTIME/EVENTS.md]]
- [[03_API/CONTRACT/REALTIME/COMMANDS.md]]

---
## 1. 진입 시 REST
| 메서드 | 엔드포인트 | 목적 |
|---|---|---|
| GET | /games/{gameId}/state | 현재 stage/remainingMs/coin/inventory 조회 |
| GET | /catalog/algorithms | 밴/픽 선택 목록 조회 |
| GET | /catalog/items | 상점 아이템 목록(가격/지속시간) 조회 |
| GET | /catalog/spells | 상점 스펠 목록(가격/지속시간) 조회 |

---

thinking
**Planning endpoint extraction**
exec
/bin/zsh -lc 'rg -n "''^'"\\s{2}/[a-z0-9/{\\}-]+:\\s*"'$" 03_API/CONTRACT/REST/OPENAPI.yaml.md' in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc 'rg -n "''^'"\\s*-\\s+[A-Z0-9_]+"'$" 03_API/CONTRACT/REALTIME/EVENTS.md 03_API/CONTRACT/REALTIME/COMMANDS.md' in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "rg -n \"\\|\\s*(GET|POST|PATCH|PUT|DELETE)\\s*\\|\\s*/[a-z0-9/{\\}-]+\" 03_API/PAGE_MAP/*.md 03_API/LIFECYCLE.md 03_API/CONTRACT/REST/API_SUMMARY.md" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 50ms:
03_API/CONTRACT/REALTIME/COMMANDS.md:17:- CHAT_SEND
03_API/CONTRACT/REALTIME/COMMANDS.md:18:- ITEM_USE
03_API/CONTRACT/REALTIME/COMMANDS.md:19:- SPELL_USE
03_API/CONTRACT/REALTIME/COMMANDS.md:38:- UNAUTHORIZED
03_API/CONTRACT/REALTIME/COMMANDS.md:39:- PLAYER_NOT_IN_ROOM
03_API/CONTRACT/REALTIME/COMMANDS.md:40:- VALIDATION_FAILED
03_API/CONTRACT/REALTIME/COMMANDS.md:41:- RATE_LIMITED
03_API/CONTRACT/REALTIME/COMMANDS.md:63:- UNAUTHORIZED
03_API/CONTRACT/REALTIME/COMMANDS.md:64:- GAME_NOT_FOUND
03_API/CONTRACT/REALTIME/COMMANDS.md:65:- INVALID_STAGE_ACTION
03_API/CONTRACT/REALTIME/COMMANDS.md:66:- GAME_ALREADY_FINISHED
03_API/CONTRACT/REALTIME/COMMANDS.md:67:- VALIDATION_FAILED
03_API/CONTRACT/REALTIME/COMMANDS.md:89:- UNAUTHORIZED
03_API/CONTRACT/REALTIME/COMMANDS.md:90:- GAME_NOT_FOUND
03_API/CONTRACT/REALTIME/COMMANDS.md:91:- INVALID_STAGE_ACTION
03_API/CONTRACT/REALTIME/COMMANDS.md:92:- GAME_ALREADY_FINISHED
03_API/CONTRACT/REALTIME/COMMANDS.md:93:- VALIDATION_FAILED
03_API/CONTRACT/REALTIME/EVENTS.md:17:- ERROR
03_API/CONTRACT/REALTIME/EVENTS.md:18:- CHAT_MESSAGE
03_API/CONTRACT/REALTIME/EVENTS.md:19:- TIME_SYNC
 succeeded in 52ms:
656:  /auth/kakao/login:
698:  /auth/signup:
740:  /auth/logout:
770:  /users/me:
805:  /users/me/active-game:
842:  /users/me/stats:
877:  /users/me/matches:
928:  /rooms:
1811:  /catalog/algorithms:
1846:  /catalog/items:
1881:  /catalog/spells:
1916:  /stats/realtime/player-rankings:
1951:  /stats/realtime/algorithm-pick-ban-rates:
 succeeded in 50ms:
03_API/PAGE_MAP/MAIN.md:14:| MAIN 진입 전 공통 | GET | /users/me/active-game | 진행 중 게임 복귀 필요 여부 확인 (없을 때 MAIN 진입) |
03_API/PAGE_MAP/MAIN.md:15:| MAIN 진입 직후 | GET | /users/me | 상단 프로필/코인/점수/레벨/경험치 표시 |
03_API/PAGE_MAP/MAIN.md:16:| MAIN 진입 직후 | GET | /stats/realtime/player-rankings | 실시간 플레이어 랭킹 표시 |
03_API/PAGE_MAP/MAIN.md:17:| MAIN 진입 직후 | GET | /stats/realtime/algorithm-pick-ban-rates | 실시간 알고리즘 밴/픽률 표시 |
03_API/PAGE_MAP/MAIN.md:23:| 방 생성(모달) | POST | /rooms | 성공 시 생성된 roomId 기준 WAITING_ROOM 진입 |
03_API/PAGE_MAP/MAIN.md:24:| ROOM_LIST 패널 열기 | GET | /rooms | MAIN 내부 ROOM_LIST 패널 진입 시 목록 조회(listVersion 포함) |
03_API/PAGE_MAP/IN_GAME.md:14:| GET | /games/{gameId}/state | PLAY 시점 스냅샷(remainingMs, players, coin, inventory) 동기화 |
03_API/PAGE_MAP/IN_GAME.md:20:| 코드 제출 | POST | /games/{gameId}/submissions | stage=PLAY에서만 허용 |
03_API/PAGE_MAP/BAN_PICK_SHOP.md:14:| GET | /games/{gameId}/state | 현재 stage/remainingMs/coin/inventory 조회 |
03_API/PAGE_MAP/BAN_PICK_SHOP.md:15:| GET | /catalog/algorithms | 밴/픽 선택 목록 조회 |
03_API/PAGE_MAP/BAN_PICK_SHOP.md:16:| GET | /catalog/items | 상점 아이템 목록(가격/지속시간) 조회 |
03_API/PAGE_MAP/BAN_PICK_SHOP.md:17:| GET | /catalog/spells | 상점 스펠 목록(가격/지속시간) 조회 |
03_API/PAGE_MAP/BAN_PICK_SHOP.md:23:| BAN | 알고리즘 밴 제출 | POST | /games/{gameId}/ban |
03_API/PAGE_MAP/BAN_PICK_SHOP.md:24:| PICK | 알고리즘 픽 제출 | POST | /games/{gameId}/pick |
03_API/PAGE_MAP/BAN_PICK_SHOP.md:25:| SHOP | 아이템/스펠 일괄 구매 | POST | /games/{gameId}/shop/purchase |
03_API/PAGE_MAP/MY_PAGE.md:11:| GET | /users/me | 프로필(언어/티어/점수/경험치/레벨/진행도/코인) 조회 |
03_API/PAGE_MAP/MY_PAGE.md:12:| GET | /users/me/stats | 승/패/무/승률 통계 조회 |
03_API/PAGE_MAP/MY_PAGE.md:13:| GET | /users/me/matches | 전적 목록 첫 페이지 조회 |
03_API/PAGE_MAP/MY_PAGE.md:19:| 전적 더보기(무한 스크롤/페이지네이션) | GET | /users/me/matches | cursor, limit |
03_API/PAGE_MAP/MY_PAGE.md:20:| 새로고침 | GET | /users/me, /users/me/stats, /users/me/matches | 기본 스냅샷 재조회 |

thinking
**Inspecting path indentation and quoting**
exec
/bin/zsh -lc "sed -n '900,1280p' 03_API/CONTRACT/REST/OPENAPI.yaml.md" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "sed -n '1680,1990p' 03_API/CONTRACT/REST/OPENAPI.yaml.md" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "sed -n '1280,1680p' 03_API/CONTRACT/REST/OPENAPI.yaml.md" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 51ms:

  /games/{gameId}/shop/purchase:
    post:
      tags: [Games]
      summary: SHOP 일괄 구매
      parameters:
        - name: gameId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ShopPurchaseRequest"
      responses:
        "200":
          description: 성공
 succeeded in 51ms:
                    properties:
                      data:
                        $ref: "#/components/schemas/PagedMatchList"
        "400":
          description: 잘못된 요청
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorEnvelope"
        "401":
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorEnvelope"
        "429":
          description: 요청 제한
          content:
            application/json:
              schema:
 succeeded in 51ms:
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorEnvelope"
        "409":
          description: 상태 충돌
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorEnvelope"
        "429":
          description: 요청 제한
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorEnvelope"
        "500":
          description: 서버 오류
          content:
            application/json:

thinking
**Inspecting API security overrides**
exec
/bin/zsh -lc "sed -n '640,780p' 03_API/CONTRACT/REST/OPENAPI.yaml.md" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/PlayerRanking"

    ListOfAlgorithmPickBanRates:
      type: object
      required: [items]
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/AlgorithmPickBanRate"

paths:
  /auth/kakao/login:
    post:
      tags: [Auth]
      summary: 카카오 로그인

thinking
**Planning broken link check**
exec
/bin/zsh -lc 'tmp=$(mktemp); rg -No "'"\\[\\[["'^'"\\]]+\\]\\]\" 03_API/**/*.md 03_API/*.md | sed -E 's/.*\\[\\[(["'^'"\\]]+)\\]\\].*/\\1/' | sort -u > \""'$tmp"; echo "LINK_COUNT $(wc -l < "$tmp")"; while IFS= read -r p; do if [ -e "$p" ]; then :; else echo "MISSING $p"; fi; done < "$tmp"; rm "$tmp"' in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
LINK_COUNT       49
MISSING 03_API/CONTRACT/REALTIME/COMMANDS.md:[[03_API/CONTRACT/REALTIME/CONVENTIONS.md]]
MISSING 03_API/CONTRACT/REALTIME/COMMANDS.md:[[03_API/CONTRACT/REALTIME/EVENTS.md]]
MISSING 03_API/CONTRACT/REALTIME/CONVENTIONS.md:[[03_API/CONTRACT/REALTIME/COMMANDS.md]]
MISSING 03_API/CONTRACT/REALTIME/CONVENTIONS.md:[[03_API/CONTRACT/REALTIME/EVENTS.md]]
MISSING 03_API/CONTRACT/REALTIME/CONVENTIONS.md:[[03_API/CONTRACT/REALTIME/TOPICS.md]]
MISSING 03_API/CONTRACT/REALTIME/EVENTS.md:[[03_API/CONTRACT/REALTIME/CONVENTIONS.md]]
MISSING 03_API/CONTRACT/REALTIME/EVENTS.md:[[03_API/CONTRACT/REALTIME/TOPICS.md]]
MISSING 03_API/CONTRACT/REALTIME/TOPICS.md:[[03_API/CONTRACT/REALTIME/EVENTS.md]]
MISSING 03_API/CONTRACT/REST/API_SUMMARY.md:[[03_API/CONTRACT/REST/OPENAPI.yaml.md]]
MISSING 03_API/CONTRACT/REST/AUTH_GUARDS.md:[[03_API/CONTRACT/REST/ERROR_MODEL.md]]
MISSING 03_API/CONTRACT/REST/AUTH_GUARDS.md:[[03_API/CONTRACT/REST/OPENAPI.yaml.md]]
MISSING 03_API/CONTRACT/REST/CONVENTIONS.md:[[03_API/CONTRACT/REST/AUTH_GUARDS.md]]
MISSING 03_API/CONTRACT/REST/CONVENTIONS.md:[[03_API/CONTRACT/REST/ERROR_MODEL.md]]
MISSING 03_API/CONTRACT/REST/CONVENTIONS.md:[[03_API/CONTRACT/REST/OPENAPI.yaml.md]]
MISSING 03_API/CONTRACT/REST/ERROR_MODEL.md:[[03_API/CONTRACT/REST/OPENAPI.yaml.md]]
MISSING 03_API/CONTRACT/REST/OPENAPI.yaml.md:[[03_API/CONTRACT/REST/API_SUMMARY.md]]
MISSING 03_API/CONTRACT/REST/OPENAPI.yaml.md:[[03_API/CONTRACT/REST/AUTH_GUARDS.md]]
MISSING 03_API/CONTRACT/REST/OPENAPI.yaml.md:[[03_API/CONTRACT/REST/CONVENTIONS.md]]
MISSING 03_API/CONTRACT/REST/OPENAPI.yaml.md:[[03_API/CONTRACT/REST/ERROR_MODEL.md]]

thinking
**Correcting extraction command**
exec
/bin/zsh -lc 'tmp=$(mktemp); rg -No --no-filename "'"\\[\\[["'^'"\\]]+\\]\\]\" 03_API/**/*.md 03_API/*.md | sed -E 's/"'^'"\\[\\[(["'^'"\\]]+)\\]\\]"'$/'"\\1/' | sort -u > \""'$tmp"; echo "LINK_COUNT $(wc -l < "$tmp")"; while IFS= read -r p; do if [ -e "$p" ]; then :; else echo "MISSING $p"; fi; done < "$tmp"; rm "$tmp"' in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 51ms:
LINK_COUNT       10
MISSING [[01_PRODUCT/USER_FLOWS.md]]
MISSING [[03_API/CONTRACT/REALTIME/COMMANDS.md]]
MISSING [[03_API/CONTRACT/REALTIME/CONVENTIONS.md]]
MISSING [[03_API/CONTRACT/REALTIME/EVENTS.md]]
MISSING [[03_API/CONTRACT/REALTIME/TOPICS.md]]
MISSING [[03_API/CONTRACT/REST/API_SUMMARY.md]]
MISSING [[03_API/CONTRACT/REST/AUTH_GUARDS.md]]
MISSING [[03_API/CONTRACT/REST/CONVENTIONS.md]]
MISSING [[03_API/CONTRACT/REST/ERROR_MODEL.md]]
MISSING [[03_API/CONTRACT/REST/OPENAPI.yaml.md]]

thinking
**Testing output formatting quirks**
exec
/bin/zsh -lc "rg -No --no-filename \"\\[\\[["'^'"\\]]+\\]\\]\" 03_API/PAGE_MAP/MAIN.md | head" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
[[03_API/CONTRACT/REST/OPENAPI.yaml.md]]
[[03_API/CONTRACT/REALTIME/TOPICS.md]]
[[03_API/CONTRACT/REALTIME/EVENTS.md]]
[[03_API/CONTRACT/REALTIME/COMMANDS.md]]

thinking
**Testing sed regex behavior**
exec
/bin/zsh -lc "echo '[[03_API/CONTRACT/REST/OPENAPI.yaml.md]]' | sed -E 's/"'^'"\\[\\[(["'^'"\\]]+)\\]\\]"'$/'"\\1/'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
[[03_API/CONTRACT/REST/OPENAPI.yaml.md]]

thinking
**Correcting sed pattern**
exec
/bin/zsh -lc 'tmp=$(mktemp); rg -No --no-filename "'"\\[\\[["'^'"\\]]+\\]\\]\" 03_API/**/*.md 03_API/*.md | sed -E 's/"'^'"\\[\\[//; s/\\]\\]"'$//'"' | sort -u > \""'$tmp"; echo "LINK_COUNT $(wc -l < "$tmp")"; while IFS= read -r p; do if [ -e "$p" ]; then :; else echo "MISSING $p"; fi; done < "$tmp"; rm "$tmp"' in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
LINK_COUNT       10

thinking
**Planning API spec consistency checks**
exec
/bin/zsh -lc "awk '
/"'^paths:/ {in_paths=1; next}
in_paths && /''^  '"\\// {path="'$1; sub(/:$/, "", path)}
in_paths && /''^    (get|post|patch|put|delete):/ {m=toupper($1); sub(/:$/, "", m); print m " " path}
'"' 03_API/CONTRACT/REST/OPENAPI.yaml.md | sort -u" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "rg -No \"\\|\\s*(GET|POST|PATCH|PUT|DELETE)\\s*\\|\\s*/[a-z0-9/{\\}-]+\" 03_API/CONTRACT/REST/API_SUMMARY.md | sed -E 's/"'^'"\\|\\s*//; s/\\s*\\|\\s*/ /; s/\\s+"'$//'"' | sort -u" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "rg -No \"\\|\\s*(GET|POST|PATCH|PUT|DELETE)\\s*\\|\\s*/[a-z0-9/{\\}-]+\" 03_API/PAGE_MAP/*.md | sed -E 's/"'^'"\\|\\s*//; s/\\s*\\|\\s*/ /; s/\\s+"'$//'"' | sort -u" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
GET /catalog/algorithms
GET /catalog/items
GET /catalog/spells
GET /games/{gameId}/state
GET /rooms
GET /rooms/{roomId}
GET /stats/realtime/algorithm-pick-ban-rates
GET /stats/realtime/player-rankings
GET /users/me
GET /users/me/active-game
GET /users/me/matches
GET /users/me/stats
POST /auth/kakao/login
POST /auth/logout
POST /auth/signup
POST /games/{gameId}/ban
POST /games/{gameId}/pick
POST /games/{gameId}/shop/purchase
POST /games/{gameId}/submissions
POST /rooms
 succeeded in 52ms:
 GET    /room
 GET    /rooms/{room
 GET   /catalog/algorithm
 GET   /catalog/item
 GET   /catalog/spell
 GET   /games/{game
 GET   /stats/realtime/algorithm-pick-ban-rate
 GET   /stats/realtime/player-ranking
 GET   /users/me
 GET   /users/me/active-game
 GET   /users/me/matche
 GET   /users/me/stat
 POST   /auth/kakao/login
 POST   /auth/logout
 POST   /auth/signup
 POST   /games/{game
 POST   /room
 POST   /rooms/{room
 succeeded in 51ms:
03_API/PAGE_MAP/BAN_PICK_SHOP.md:  GET | /catalog/algorithm
03_API/PAGE_MAP/BAN_PICK_SHOP.md:  GET | /catalog/item
03_API/PAGE_MAP/BAN_PICK_SHOP.md:  GET | /catalog/spell
03_API/PAGE_MAP/BAN_PICK_SHOP.md:  GET | /games/{game
03_API/PAGE_MAP/BAN_PICK_SHOP.md:  POST | /games/{game
03_API/PAGE_MAP/IN_GAME.md:  GET | /games/{game
03_API/PAGE_MAP/IN_GAME.md:  POST | /games/{game
03_API/PAGE_MAP/MAIN.md:  GET | /room
03_API/PAGE_MAP/MAIN.md:  GET | /stats/realtime/algorithm-pick-ban-rate
03_API/PAGE_MAP/MAIN.md:  GET | /stats/realtime/player-ranking
03_API/PAGE_MAP/MAIN.md:  GET | /users/me
03_API/PAGE_MAP/MAIN.md:  GET | /users/me/active-game
03_API/PAGE_MAP/MAIN.md:  POST | /room
03_API/PAGE_MAP/MY_PAGE.md:  GET | /users/me
03_API/PAGE_MAP/MY_PAGE.md:  GET | /users/me/matche
03_API/PAGE_MAP/MY_PAGE.md:  GET | /users/me/stat
03_API/PAGE_MAP/RESULT.md:  GET | /users/me
03_API/PAGE_MAP/RESULT.md:  GET | /users/me/active-game
03_API/PAGE_MAP/ROOM_LIST.md:  GET | /room
03_API/PAGE_MAP/ROOM_LIST.md:  POST | /rooms/{room

thinking
**Revising regex to fix truncation**
exec
/bin/zsh -lc "rg -No \"\\|\\s*(GET|POST|PATCH|PUT|DELETE)\\s*\\|\\s*["'^| ]+" 03_API/CONTRACT/REST/API_SUMMARY.md | sed -E '"'s/"'^'"\\|\\s*//; s/\\s*\\|\\s*/ /; s/\\s+"'$//'"' | sort -u" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "rg -No \"\\|\\s*(GET|POST|PATCH|PUT|DELETE)\\s*\\|\\s*["'^| ]+" 03_API/PAGE_MAP/*.md | sed -E '"'s/"'^[''^:]+:'"\\|\\s*//; s/\\s*\\|\\s*/ /; s/\\s+"'$//'"' | sort -u" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "awk '
/"'^paths:/ {in_paths=1; next}
in_paths && /''^  '"\\// {path="'$1; sub(/:$/, "", path)}
in_paths && /''^    (get|post|patch|put|delete):/ {m=toupper($1); sub(/:$/, "", m); print m " " path}
'"' 03_API/CONTRACT/REST/OPENAPI.yaml.md | sort -u > /tmp/openapi_pairs.txt
rg -No \"\\|\\s*(GET|POST|PATCH|PUT|DELETE)\\s*\\|\\s*["'^| ]+" 03_API/CONTRACT/REST/API_SUMMARY.md | sed -E '"'s/"'^'"\\|\\s*//; s/\\s*\\|\\s*/ /; s/\\s+"'$//'"' | sort -u > /tmp/summary_pairs.txt
rg -No \"\\|\\s*(GET|POST|PATCH|PUT|DELETE)\\s*\\|\\s*["'^| ]+" 03_API/PAGE_MAP/*.md | sed -E '"'s/"'^[''^:]+:'"\\|\\s*//; s/\\s*\\|\\s*/ /; s/\\s+"'$//'"' | sort -u > /tmp/pagemap_pairs.txt
echo \"SUMMARY_NOT_IN_OPENAPI\"; comm -23 /tmp/summary_pairs.txt /tmp/openapi_pairs.txt || true
echo \"PAGEMAP_NOT_IN_OPENAPI\"; comm -23 /tmp/pagemap_pairs.txt /tmp/openapi_pairs.txt || true
echo \"OPENAPI_NOT_IN_SUMMARY\"; comm -13 /tmp/summary_pairs.txt /tmp/openapi_pairs.txt || true" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
 GET    /room
 GET    /rooms/{roomId}
 GET   /catalog/algorithm
 GET   /catalog/item
 GET   /catalog/spell
 GET   /games/{gameId}/state
 GET   /stats/realtime/algorithm-pick-ban-rate
 GET   /stats/realtime/player-ranking
 GET   /users/me
 GET   /users/me/active-game
 GET   /users/me/matche
 GET   /users/me/stat
 POST   /auth/kakao/login
 POST   /auth/logout
 POST   /auth/signup
 POST   /games/{gameId}/ban
 POST   /games/{gameId}/pick
 POST   /games/{gameId}/shop/purchase
 POST   /games/{gameId}/submission
 POST   /room
 succeeded in 51ms:
 GET   /catalog/algorithm
 GET   /catalog/item
 GET   /catalog/spell
 GET   /games/{gameId}/state
 GET   /room
 GET   /rooms/{roomId}
 GET   /stats/realtime/algorithm-pick-ban-rate
 GET   /stats/realtime/player-ranking
 GET   /users/me
 GET   /users/me,
 GET   /users/me/active-game
 GET   /users/me/matche
 GET   /users/me/stat
 POST   /auth/kakao/login
 POST   /auth/signup
 POST   /games/{gameId}/ban
 POST   /games/{gameId}/pick
 POST   /games/{gameId}/shop/purchase
 POST   /games/{gameId}/submission
 POST   /room
 succeeded in 51ms:
SUMMARY_NOT_IN_OPENAPI
 GET    /room
 GET    /rooms/{roomId}
 GET   /catalog/algorithm
 GET   /catalog/item
 GET   /catalog/spell
 GET   /games/{gameId}/state
 GET   /stats/realtime/algorithm-pick-ban-rate
 GET   /stats/realtime/player-ranking
 GET   /users/me
 GET   /users/me/active-game
 GET   /users/me/matche
 GET   /users/me/stat
 POST   /auth/kakao/login
 POST   /auth/logout
 POST   /auth/signup
 POST   /games/{gameId}/ban
 POST   /games/{gameId}/pick
 POST   /games/{gameId}/shop/purchase
 POST   /games/{gameId}/submission

thinking
**Fixing trailing character removal in extraction**
exec
/bin/zsh -lc 'cat /var/folders/t7/n53x56ws4sq63f79dpnj85yr0000gn/T/pagemap_pairs_api03.txt' in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc 'cat /var/folders/t7/n53x56ws4sq63f79dpnj85yr0000gn/T/summary_pairs_api03.txt' in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "awk '
/"'^paths:/ {in_paths=1; next}
in_paths && /''^  '"\\// {path="'$1; sub(/:$/, "", path)}
in_paths && /''^    (get|post|patch|put|delete):/ {m=toupper($1); sub(/:$/, "", m); print m " " path}
'"' 03_API/CONTRACT/REST/OPENAPI.yaml.md | sort -u > /var/folders/t7/n53x56ws4sq63f79dpnj85yr0000gn/T/openapi_pairs_api03.txt
rg -No \"\\|\\s*(GET|POST|PATCH|PUT|DELETE)\\s*\\|\\s*["'^| ]+" 03_API/CONTRACT/REST/API_SUMMARY.md | sed -E '"'s/"'^'"\\|[[:space:]]*//; s/[[:space:]]*\\|[[:space:]]*/ /; s/[[:space:]]+"'$//'"' | sort -u > /var/folders/t7/n53x56ws4sq63f79dpnj85yr0000gn/T/summary_pairs_api03.txt
rg -No \"\\|\\s*(GET|POST|PATCH|PUT|DELETE)\\s*\\|\\s*["'^| ]+" 03_API/PAGE_MAP/*.md | sed -E '"'s/"'^[''^:]+:'"\\|[[:space:]]*//; s/[[:space:]]*\\|[[:space:]]*/ /; s/[[:space:]]+"'$//'"' | sort -u > /var/folders/t7/n53x56ws4sq63f79dpnj85yr0000gn/T/pagemap_pairs_api03.txt
echo \"SUMMARY_NOT_IN_OPENAPI\"; comm -23 /var/folders/t7/n53x56ws4sq63f79dpnj85yr0000gn/T/summary_pairs_api03.txt /var/folders/t7/n53x56ws4sq63f79dpnj85yr0000gn/T/openapi_pairs_api03.txt || true
echo \"PAGEMAP_NOT_IN_OPENAPI\"; comm -23 /var/folders/t7/n53x56ws4sq63f79dpnj85yr0000gn/T/pagemap_pairs_api03.txt /var/folders/t7/n53x56ws4sq63f79dpnj85yr0000gn/T/openapi_pairs_api03.txt || true
echo \"OPENAPI_NOT_IN_SUMMARY\"; comm -13 /var/folders/t7/n53x56ws4sq63f79dpnj85yr0000gn/T/summary_pairs_api03.txt /var/folders/t7/n53x56ws4sq63f79dpnj85yr0000gn/T/openapi_pairs_api03.txt || true" in /Users/kanggyeonggu/Documents/league-of-algologic exited 1 in 51ms:
cat: /var/folders/t7/n53x56ws4sq63f79dpnj85yr0000gn/T/pagemap_pairs_api03.txt: No such file or directory
 exited 1 in 51ms:
cat: /var/folders/t7/n53x56ws4sq63f79dpnj85yr0000gn/T/summary_pairs_api03.txt: No such file or directory
 succeeded in 51ms:
SUMMARY_NOT_IN_OPENAPI
PAGEMAP_NOT_IN_OPENAPI
GET /users/me,
OPENAPI_NOT_IN_SUMMARY

thinking
**Switching to /tmp with process substitution**
exec
/bin/zsh -lc 'openapi_tmp=/tmp/openapi_pairs_api03_$$.txt; summary_tmp=/tmp/summary_pairs_api03_$$.txt; pagemap_tmp=/tmp/pagemap_pairs_api03_$$.txt; awk '"'
/"'^paths:/ {in_paths=1; next}
in_paths && /''^  '"\\// {path="'$1; sub(/:$/, "", path)}
in_paths && /''^    (get|post|patch|put|delete):/ {m=toupper($1); sub(/:$/, "", m); print m " " path}
'"' 03_API/CONTRACT/REST/OPENAPI.yaml.md | sort -u > \""'$openapi_tmp"; rg -No "'"\\|\\s*(GET|POST|PATCH|PUT|DELETE)\\s*\\|\\s*["'^| ]+" 03_API/CONTRACT/REST/API_SUMMARY.md | sed -E '"'s/"'^'"\\|[[:space:]]*//; s/[[:space:]]*\\|[[:space:]]*/ /; s/[[:space:]]+"'$//'"' | sort -u > \""'$summary_tmp"; rg -No "'"\\|\\s*(GET|POST|PATCH|PUT|DELETE)\\s*\\|\\s*["'^| ]+" 03_API/PAGE_MAP/*.md | sed -E '"'s/"'^[''^:]+:'"\\|[[:space:]]*//; s/[[:space:]]*\\|[[:space:]]*/ /; s/[[:space:]]+"'$//'"' | sort -u > \""'$pagemap_tmp"; echo "SUMMARY:"; cat "$summary_tmp"; echo "PAGEMAP:"; cat "$pagemap_tmp"; echo "SUMMARY_NOT_IN_OPENAPI:"; comm -23 "$summary_tmp" "$openapi_tmp" || true; echo "PAGEMAP_NOT_IN_OPENAPI:"; comm -23 "$pagemap_tmp" "$openapi_tmp" || true; echo "OPENAPI_NOT_IN_SUMMARY:"; comm -13 "$summary_tmp" "$openapi_tmp" || true; echo "TMP_FILES:$openapi_tmp $summary_tmp $pagemap_tmp"' in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
SUMMARY:
GET /catalog/algorithms
GET /catalog/items
GET /catalog/spells
GET /games/{gameId}/state
GET /rooms
GET /rooms/{roomId}
GET /stats/realtime/algorithm-pick-ban-rates
GET /stats/realtime/player-rankings
GET /users/me
GET /users/me/active-game
GET /users/me/matches
GET /users/me/stats
POST /auth/kakao/login
POST /auth/logout
POST /auth/signup
POST /games/{gameId}/ban
POST /games/{gameId}/pick
POST /games/{gameId}/shop/purchase
POST /games/{gameId}/submissions

thinking
**Planning sync checks between docs and page maps**
codex
{"run_id":"20260212-211025","agent_id":"area-auditor","task_id":"AREA-03_API","target":{"kind":"area","id":"03_API"},"status":"warn","summary":"REST endpoint alignment is mostly consistent; I’m now validating topic/event/command names used in PAGE_MAP against REALTIME contracts to detect drift.","findings":[],"metrics":{"files_scanned":24,"links_checked":10,"relations_checked":0},"started_at":"2026-02-12T00:00:00Z","finished_at":"2026-02-12T00:00:00Z"}
exec
/bin/zsh -lc 'contract_topics_tmp=/tmp/contract_topics_$$.txt; pagemap_topics_tmp=/tmp/pagemap_topics_$$.txt; contract_cmd_tmp=/tmp/contract_cmd_$$.txt; pagemap_cmd_tmp=/tmp/pagemap_cmd_$$.txt; contract_evt_tmp=/tmp/contract_evt_$$.txt; pagemap_evt_tmp=/tmp/pagemap_evt_$$.txt;
awk -F'"'|' '/"'^'"\\|[[:space:]]*\\/(topic|user\\/queue)\\// {gsub(/"'^[[:space:]]+|[[:space:]]+$/, "", $2); print $2}'"' 03_API/CONTRACT/REALTIME/TOPICS.md | sort -u > \""'$contract_topics_tmp";
rg -No --no-filename "/(topic|user/queue)/[A-Za-z0-9_/{}/-]+" 03_API/PAGE_MAP/*.md | sort -u > "$pagemap_topics_tmp";
awk -F'"': ' '/"'^Destination:/ {print $2}'"' 03_API/CONTRACT/REALTIME/COMMANDS.md | sort -u > \""'$contract_cmd_tmp";
rg -No --no-filename "/app/[A-Za-z0-9_/{}/.-]+" 03_API/PAGE_MAP/*.md | sort -u > "$pagemap_cmd_tmp";
awk '"'/"'^### 1'"\\.1 EventType 목록/{flag=1; next} flag && /"'^---/{flag=0} flag && /''^- /{sub(/''^- /, "", $0); print $0}'"' 03_API/CONTRACT/REALTIME/EVENTS.md | sort -u > \""'$contract_evt_tmp";
# extract event tokens from table cells in PAGE_MAP
awk -F'"'|' '/"'^'"\\|/ {for (i=1;i<=NF;i++) {gsub(/"'^[[:space:]]+|[[:space:]]+$/, "", $i); if ($i ~ /''^[A-Z][A-Z0-9_]*(,[[:space:]]*[A-Z][A-Z0-9_]*)*$/) print $i}}'"' 03_API/PAGE_MAP/*.md | tr ',' '\\n' | sed -E 's/"'^[[:space:]]+|[[:space:]]+$//g'"' | rg '"'^[A-Z][A-Z0-9_]*$'"' | sort -u > \""'$pagemap_evt_tmp";

echo '"'TOPICS_NOT_IN_CONTRACT'; comm -23 \""'$pagemap_topics_tmp" "$contract_topics_tmp" || true;
echo '"'COMMAND_DEST_NOT_IN_CONTRACT'; comm -23 \""'$pagemap_cmd_tmp" "$contract_cmd_tmp" || true;
echo '"'EVENTS_NOT_IN_CONTRACT'; comm -23 \""'$pagemap_evt_tmp" "$contract_evt_tmp" || true;
echo '"'PAGE_MAP_TOPICS'; cat \""'$pagemap_topics_tmp";
echo '"'CONTRACT_TOPICS'; cat \""'$contract_topics_tmp";
echo '"'PAGE_MAP_COMMANDS'; cat \""'$pagemap_cmd_tmp";
echo '"'CONTRACT_COMMANDS'; cat \""'$contract_cmd_tmp";
echo '"'PAGE_MAP_EVENTS'; cat \""'$pagemap_evt_tmp";
echo '"'CONTRACT_EVENTS'; cat \""'$contract_evt_tmp";
echo "TMP_FILES:$contract_topics_tmp $pagemap_topics_tmp $contract_cmd_tmp $pagemap_cmd_tmp $contract_evt_tmp $pagemap_evt_tmp"' in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 51ms:
TOPICS_NOT_IN_CONTRACT
COMMAND_DEST_NOT_IN_CONTRACT
/app/chat.send
/app/games/{gameId}/items.use
/app/games/{gameId}/spells.use
EVENTS_NOT_IN_CONTRACT
API
BAN
CHAT_SEND
GET
ITEM_USE
PICK
POST
READY
REST
SHOP
SPELL_USE
UNREADY
PAGE_MAP_TOPICS
/topic/chat/global

thinking
**Refining command and event parsing**
exec
/bin/zsh -lc 'contract_topics_tmp=/tmp/contract_topics2_$$.txt; pagemap_topics_tmp=/tmp/pagemap_topics2_$$.txt; contract_cmd_tmp=/tmp/contract_cmd2_$$.txt; pagemap_cmd_tmp=/tmp/pagemap_cmd2_$$.txt; contract_evt_tmp=/tmp/contract_evt2_$$.txt; pagemap_evt_tmp=/tmp/pagemap_evt2_$$.txt;
awk -F'"'|' '/"'^'"\\|[[:space:]]*\\/(topic|user\\/queue)\\// {gsub(/"'^[[:space:]]+|[[:space:]]+$/, "", $2); print $2}'"' 03_API/CONTRACT/REALTIME/TOPICS.md | sort -u > \""'$contract_topics_tmp";
awk -F'"'|' '/"'^'"\\|[[:space:]]*\\/(topic|user\\/queue)\\// {gsub(/"'^[[:space:]]+|[[:space:]]+$/, "", $2); print $2}'"' 03_API/PAGE_MAP/*.md | sort -u > \""'$pagemap_topics_tmp";
awk -F'"': ' '/"'^Destination:/ {gsub(/`/,"",$2); print $2}'"' 03_API/CONTRACT/REALTIME/COMMANDS.md | sort -u > \""'$contract_cmd_tmp";
awk -F'"'|' '/"'^'"\\|[[:space:]]*\\/app\\// {gsub(/"'^[[:space:]]+|[[:space:]]+$/, "", $2); print $2}'"' 03_API/PAGE_MAP/*.md | sort -u > \""'$pagemap_cmd_tmp";
awk '"'/"'^### 1'"\\.1 EventType 목록/{flag=1; next} flag && /"'^---/{flag=0} flag && /''^- /{sub(/''^- /, "", $0); print $0}'"' 03_API/CONTRACT/REALTIME/EVENTS.md | sort -u > \""'$contract_evt_tmp";
awk -F'"'|' '/"'^'"\\|[[:space:]]*\\/(topic|user\\/queue)\\// {gsub(/"'^[[:space:]]+|[[:space:]]+$/, "", $3); print $3}'"' 03_API/PAGE_MAP/*.md | tr ',' '\\n' | sed -E 's/"'^[[:space:]]+|[[:space:]]+$//g'"' | rg '"'^[A-Z][A-Z0-9_]*$'"' | sort -u > \""'$pagemap_evt_tmp";

echo '"'TOPICS_NOT_IN_CONTRACT'; comm -23 \""'$pagemap_topics_tmp" "$contract_topics_tmp" || true;
echo '"'COMMAND_DEST_NOT_IN_CONTRACT'; comm -23 \""'$pagemap_cmd_tmp" "$contract_cmd_tmp" || true;
echo '"'EVENTS_NOT_IN_CONTRACT'; comm -23 \""'$pagemap_evt_tmp" "$contract_evt_tmp" || true;
echo '"'CONTRACT_EVENTS_NOT_USED_BY_PAGEMAP'; comm -13 \""'$pagemap_evt_tmp" "$contract_evt_tmp" || true;
echo '"'PAGE_MAP_EVENTS'; cat \""'$pagemap_evt_tmp";
echo "TMP_FILES:$contract_topics_tmp $pagemap_topics_tmp $contract_cmd_tmp $pagemap_cmd_tmp $contract_evt_tmp $pagemap_evt_tmp"' in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
TOPICS_NOT_IN_CONTRACT
COMMAND_DEST_NOT_IN_CONTRACT
EVENTS_NOT_IN_CONTRACT
CONTRACT_EVENTS_NOT_USED_BY_PAGEMAP
TIME_SYNC
PAGE_MAP_EVENTS
CHAT_MESSAGE
EFFECT_REMOVED
ERROR
GAME_BAN_FINALIZED
GAME_BAN_SUBMITTED
GAME_FINISHED
GAME_PICK_FINALIZED
GAME_PICK_SUBMITTED
GAME_SHOP_PURCHASED
GAME_STAGE_CHANGED
INVENTORY_SYNC
ITEM_EFFECT_APPLIED
ITEM_EFFECT_BLOCKED
ROOM_GAME_STARTED

thinking
**Identifying contract doc inconsistencies**
exec
/bin/zsh -lc "nl -ba 03_API/LIFECYCLE.md | sed -n '130,180p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
   130	| 로그인 직후                   | `GET /users/me/active-game`        | 복귀 여부 판단               |
   131	| ROOM_LIST 패널 진입            | `GET /rooms`                       | 목록 스냅샷 + listVersion 동기화 |
   132	| ROOM_LIST 업데이트 적용         | `GET /rooms`                       | 누적 변경분 최신화             |
   133	| ROOM_LIST 체류 중(20~30초)    | `GET /rooms`                       | 보정 재동기화                |
   134	| 방 진입                     | `GET /rooms/{roomId}`              | 대기실 스냅샷                |
   135	| 게임 진입/재접속                | `GET /games/{gameId}/state`        | 현재 stage/remaining 동기화 |
   136	| READY/UNREADY/START/KICK | 해당 Room 명령 API                     | 대기실 명령                 |
   137	| BAN/PICK/SHOP 구매         | `POST /games/{gameId}/shop/purchase` | 밴/픽/구매 처리              |
   138	| 코드 제출                    | `POST /games/{gameId}/submissions` | 제출 처리                  |
   139	
   140	---
   141	## 6. 라이프사이클 다이어그램
   142	```mermaid
   143	flowchart TD
   144	  A[Login 완료] --> B[WebSocket 연결 /ws]
   145	  B --> C["기본 구독:<br/>/user/queue/errors<br/>/user/queue/rooms<br/>/user/queue/inventory"]
   146	  C --> D{active game 존재?}
   147	
   148	  D -- No --> M[MAIN]
   149	  M --> M1["구독:<br/>/topic/chat/global"]

thinking
**Checking inclusion of time in mermaid**
exec
/bin/zsh -lc "nl -ba 03_API/LIFECYCLE.md | sed -n '18,40p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
    18	
    19	---
    20	## 2. 연결 및 기본 구독
    21	### 2.1 연결 시퀀스
    22	1. 로그인 완료 후 WebSocket 연결
    23	2. 기본 구독
    24	   - `/user/queue/errors`
    25	   - `/user/queue/time`
    26	   - `/user/queue/rooms`
    27	   - `/user/queue/inventory`
    28	3. REST `/users/me/active-game`으로 복귀 여부 판단
    29	4. active game이 없으면 MAIN으로 이동
    30	
    31	### 2.2 재접속 규칙
    32	- 연결 끊김/새로고침 시:
    33	  1) WebSocket 재연결
    34	  2) `/users/me/active-game` 재조회
    35	  3) 해당 페이지 구독 재설정
    36	  4) REST로 스냅샷 재조회(`/rooms/{roomId}`, `/games/{gameId}/state`)
    37	- active game은 진행 중 게임만 포함한다.

thinking
**Identifying traceability gaps**
exec
/bin/zsh -lc 'rg -n "/user/queue/time|TIME_SYNC" 03_API -S' in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
03_API/LIFECYCLE.md:25:   - `/user/queue/time`
03_API/CONTRACT/REALTIME/EVENTS.md:19:- TIME_SYNC
03_API/CONTRACT/REALTIME/EVENTS.md:43:### 2.1 TIME_SYNC
03_API/CONTRACT/REALTIME/EVENTS.md:44:Topic: `/user/queue/time`
03_API/CONTRACT/REALTIME/EVENTS.md:46:Type: `TIME_SYNC`
03_API/CONTRACT/REALTIME/EVENTS.md:52:- 클라이언트는 TIME_SYNC로 오프셋을 재계산한다.
03_API/CONTRACT/REALTIME/EVENTS.md:53:- TIME_SYNC는 기본 10초, BAN/PICK/SHOP 단계는 2초 주기로 전송한다.
03_API/CONTRACT/REALTIME/TOPICS.md:25:| /user/queue/time | USER | TIME_SYNC | 시간 동기화 |
03_API/CONTRACT/REALTIME/CONVENTIONS.md:66:- TIME_SYNC 이벤트는 `/user/queue/time`으로 전송된다.

thinking
**Planning evidence extraction from page maps**
exec
/bin/zsh -lc "nl -ba 03_API/PAGE_MAP/WAITING_ROOM.md | sed -n '29,40p'" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "nl -ba 03_API/PAGE_MAP/MAIN.md | sed -n '27,36p'" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "nl -ba 03_API/PAGE_MAP/IN_GAME.md | sed -n '24,36p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
    24	### 3.1 구독
    25	| 채널 | 이벤트 타입 | 목적 |
    26	|---|---|---|
    27	| /topic/games/{gameId} | GAME_STAGE_CHANGED | stage/remainingMs 동기화 |
    28	| /topic/games/{gameId} | ITEM_EFFECT_APPLIED | 아이템 효과 적용 반영 |
    29	| /topic/games/{gameId} | SPELL_EFFECT_APPLIED | 스펠 효과 적용 반영 |
    30	| /topic/games/{gameId} | ITEM_EFFECT_BLOCKED | 보호막 등 차단 결과 반영 |
    31	| /topic/games/{gameId} | EFFECT_REMOVED | 효과 종료/해제 반영 |
    32	| /topic/games/{gameId} | GAME_FINISHED | 결과 화면 전환 트리거 |
    33	| /topic/rooms/{roomId}/chat | CHAT_MESSAGE | 룸 채팅 수신 |
    34	| /user/queue/inventory | INVENTORY_SYNC | 본인 인벤토리 동기화 |
    35	| /user/queue/errors | ERROR | 명령 실패 처리 |
    36	
 succeeded in 52ms:
    27	## 3. 실시간 구독/발행
    28	### 3.1 구독
    29	| 채널 | 이벤트 타입 | 목적 |
    30	|---|---|---|
    31	| /topic/chat/global | CHAT_MESSAGE | 전역 채팅 수신 |
    32	| /topic/rooms/list | ROOM_LIST_UPSERT, ROOM_LIST_REMOVED | ROOM_LIST 패널 활성 중 목록 변경 감지 |
    33	| /user/queue/errors | ERROR | 실시간 명령 실패 수신 |
    34	
    35	### 3.2 발행 (Command)
    36	| Destination | Command Type | Data 핵심 필드 |
 succeeded in 52ms:
    29	### 3.1 구독
    30	| 채널 | 이벤트 타입 | 목적 |
    31	|---|---|---|
    32	| /topic/rooms/{roomId}/lobby | ROOM_PLAYER_JOINED | 입장자 슬롯 반영 |
    33	| /topic/rooms/{roomId}/lobby | ROOM_PLAYER_LEFT | 퇴장/강퇴 슬롯 반영 |
    34	| /topic/rooms/{roomId}/lobby | ROOM_PLAYER_STATE_CHANGED | READY/UNREADY/DISCONNECTED 반영 |
    35	| /topic/rooms/{roomId}/lobby | ROOM_HOST_CHANGED | 방장 변경 반영 |
    36	| /topic/rooms/{roomId}/lobby | ROOM_GAME_STARTED | 게임 시작 알림(게임 토픽 구독 전환 트리거) |
    37	| /topic/rooms/{roomId}/chat | CHAT_MESSAGE | 인게임(룸 스코프) 채팅 수신 |
    38	| /user/queue/rooms | ROOM_KICKED | 본인 강퇴 알림 처리 |
    39	| /user/queue/errors | ERROR | 실시간 명령 실패 처리 |
    40	

thinking
**Identifying potential doc inconsistencies**
exec
/bin/zsh -lc 'date -u +"%Y-%m-%dT%H:%M:%SZ"' in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
2026-02-12T12:14:58Z

thinking
**Identifying key evidence lines**
exec
/bin/zsh -lc "nl -ba 03_API/CONTRACT/REST/API_SUMMARY.md | sed -n '62,72p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
    62	| 게임 상태 조회 | GET | /games/{gameId}/state | stage, remainingMs 등 |
    63	
    64	### 5.2 Ranked Commands
    65	| 기능 | 메서드 | 엔드포인트 | 설명 |
    66	|---|---|---|---|
    67	| 밴 제출 | POST | /games/{gameId}/ban | body: algorithmId |
    68	| 픽 제출 | POST | /games/{gameId}/pick | body: algorithmId |
    69	| SHOP 일괄 구매 | POST | /games/{gameId}/shop/purchase | body: items[], spells[] |
    70	
    71	### 5.3 Play
    72	| 기능 | 메서드 | 엔드포인트 | 설명 |
exec
/bin/zsh -lc "nl -ba 03_API/PAGE_MAP/BAN_PICK_SHOP.md | sed -n '20,27p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 51ms:
    20	## 2. 사용자 액션 → REST
    21	| 내부 단계 | 사용자 액션 | 메서드 | 엔드포인트 |
    22	|---|---|---|---|
    23	| BAN | 알고리즘 밴 제출 | POST | /games/{gameId}/ban |
    24	| PICK | 알고리즘 픽 제출 | POST | /games/{gameId}/pick |
    25	| SHOP | 아이템/스펠 일괄 구매 | POST | /games/{gameId}/shop/purchase |
    26	
    27	### 2.1 단계 제한시간

thinking
**Identifying missing time sync coverage**
exec
/bin/zsh -lc "nl -ba 03_API/LIFECYCLE.md | sed -n '142,147p;178,181p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 50ms:
   142	```mermaid
   143	flowchart TD
   144	  A[Login 완료] --> B[WebSocket 연결 /ws]
   145	  B --> C["기본 구독:<br/>/user/queue/errors<br/>/user/queue/rooms<br/>/user/queue/inventory"]
   146	  C --> D{active game 존재?}
   147	
   178	  C->>WS: Connect /ws (Bearer JWT)
   179	  WS-->>C: Connected
   180	  C->>WS: SUB /user/queue/errors, /user/queue/rooms, /user/queue/inventory
   181	  C->>REST: GET /users/me/active-game

thinking
**Planning topic line numbers**
exec
/bin/zsh -lc "nl -ba 03_API/CONTRACT/REALTIME/TOPICS.md | sed -n '21,27p'" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
    21	| /topic/rooms/{roomId}/chat | ROOM | CHAT_MESSAGE | 대기실~인게임 채팅(ROOM 스코프) |
    22	| /topic/rooms/{roomId}/lobby | ROOM | ROOM_PLAYER_JOINED, ROOM_PLAYER_LEFT, ROOM_PLAYER_STATE_CHANGED, ROOM_HOST_CHANGED, ROOM_GAME_STARTED | 대기실 상태 변경/게임 시작 |
    23	| /topic/games/{gameId} | GAME | GAME_STAGE_CHANGED, GAME_BAN_SUBMITTED, GAME_BAN_FINALIZED, GAME_PICK_SUBMITTED, GAME_PICK_FINALIZED, GAME_SHOP_PURCHASED, ITEM_EFFECT_APPLIED, SPELL_EFFECT_APPLIED, ITEM_EFFECT_BLOCKED, EFFECT_REMOVED, GAME_FINISHED | 게임 진행 이벤트 |
    24	| /user/queue/errors | USER | ERROR | 명령 실패 응답 |
    25	| /user/queue/time | USER | TIME_SYNC | 시간 동기화 |
    26	| /user/queue/inventory | USER | INVENTORY_SYNC | 인벤토리 동기화(본인) |
    27	| /user/queue/rooms | USER | ROOM_KICKED | 강퇴 알림(본인) |

thinking
**Summarizing API mapping inconsistencies**
exec
/bin/zsh -lc "sed -n '25p;145p;180p' 03_API/LIFECYCLE.md" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "sed -n '31p;33p' 03_API/PAGE_MAP/MAIN.md" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "sed -n '67p;68p' 03_API/CONTRACT/REST/API_SUMMARY.md" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "sed -n '25p' 03_API/CONTRACT/REALTIME/TOPICS.md" in /Users/kanggyeonggu/Documents/league-of-algologicexec
/bin/zsh -lc "sed -n '137p' 03_API/LIFECYCLE.md" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
   - `/user/queue/time`
  B --> C["기본 구독:<br/>/user/queue/errors<br/>/user/queue/rooms<br/>/user/queue/inventory"]
  C->>WS: SUB /user/queue/errors, /user/queue/rooms, /user/queue/inventory
 succeeded in 52ms:
| BAN/PICK/SHOP 구매         | `POST /games/{gameId}/shop/purchase` | 밴/픽/구매 처리              |
 succeeded in 52ms:
| /topic/chat/global | CHAT_MESSAGE | 전역 채팅 수신 |
| /user/queue/errors | ERROR | 실시간 명령 실패 수신 |
 succeeded in 52ms:
| 밴 제출 | POST | /games/{gameId}/ban | body: algorithmId |
| 픽 제출 | POST | /games/{gameId}/pick | body: algorithmId |
 succeeded in 52ms:
| /user/queue/time | USER | TIME_SYNC | 시간 동기화 |

thinking
**Gathering absent time evidence**
exec
/bin/zsh -lc "sed -n '38p;39p' 03_API/PAGE_MAP/WAITING_ROOM.md; sed -n '34p;35p' 03_API/PAGE_MAP/IN_GAME.md" in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
| /user/queue/rooms | ROOM_KICKED | 본인 강퇴 알림 처리 |
| /user/queue/errors | ERROR | 실시간 명령 실패 처리 |
| /user/queue/inventory | INVENTORY_SYNC | 본인 인벤토리 동기화 |
| /user/queue/errors | ERROR | 명령 실패 처리 |

thinking
**Assessing page map endpoint formatting**
exec
/bin/zsh -lc 'date -u +"%Y-%m-%dT%H:%M:%SZ"' in /Users/kanggyeonggu/Documents/league-of-algologic succeeded in 52ms:
2026-02-12T12:15:49Z

thinking
**Crafting final JSON report**
codex
{"run_id":"20260212-211025","agent_id":"area-auditor","task_id":"AREA-03_API","target":{"kind":"area","id":"03_API"},"status":"warn","summary":"Found 2 medium integrity issues in 03_API lifecycle/page-map alignment; required documents exist and checked in-scope links resolve.","findings":[{"severity":"medium","code":"API_LIFECYCLE_ENDPOINT_DRIFT","message":"`LIFECYCLE.md` collapses BAN/PICK/SHOP actions into only `/games/{gameId}/shop/purchase`, which drifts from the canonical REST contracts that define separate `/ban` and `/pick` endpoints.","dedupe_key":"03_API:lifecycle:ban-pick-shop-endpoint-drift","evidence":[{"path":"03_API/LIFECYCLE.md","line":137,"snippet":"| BAN/PICK/SHOP 구매         | `POST /games/{gameId}/shop/purchase` | 밴/픽/구매 처리              |"},{"path":"03_API/CONTRACT/REST/API_SUMMARY.md","line":67,"snippet":"| 밴 제출 | POST | /games/{gameId}/ban | body: algorithmId |"},{"path":"03_API/CONTRACT/REST/API_SUMMARY.md","line":68,"snippet":"| 픽 제출 | POST | /games/{gameId}/pick | body: algorithmId |"}],"proposed_fix":"Update the lifecycle REST timing table to list BAN, PICK, and SHOP as separate calls (`/games/{gameId}/ban`, `/games/{gameId}/pick`, `/games/{gameId}/shop/purchase`) to match SSOT contracts."},{"severity":"medium","code":"API_TIME_SYNC_TRACEABILITY_GAP","message":"`TIME_SYNC` on `/user/queue/time` is defined as a basic subscription in realtime contracts, but lifecycle diagrams and page-level subscription maps omit it, creating traceability drift for timing synchronization behavior.","dedupe_key":"03_API:realtime:time-sync-page-map-gap","evidence":[{"path":"03_API/LIFECYCLE.md","line":25,"snippet":"   - `/user/queue/time`"},{"path":"03_API/LIFECYCLE.md","line":145,"snippet":"  B --> C[\"기본 구독:<br/>/user/queue/errors<br/>/user/queue/rooms<br/>/user/queue/inventory\"]"},{"path":"03_API/LIFECYCLE.md","line":180,"snippet":"  C->>WS: SUB /user/queue/errors, /user/queue/rooms, /user/queue/inventory"},{"path":"03_API/CONTRACT/REALTIME/TOPICS.md","line":25,"snippet":"| /user/queue/time | USER | TIME_SYNC | 시간 동기화 |"},{"path":"03_API/PAGE_MAP/MAIN.md","line":33,"snippet":"| /user/queue/errors | ERROR | 실시간 명령 실패 수신 |"}],"proposed_fix":"Make treatment of `/user/queue/time` explicit and consistent: either add it to lifecycle diagrams and relevant PAGE_MAP subscription sections, or document it as a global non-page subscription with a clear cross-reference."}],"metrics":{"files_scanned":20,"links_checked":10,"relations_checked":5},"started_at":"2026-02-12T12:05:00Z","finished_at":"2026-02-12T12:15:49Z"}
tokens used
146,353
