{
  "run_id": "20260212-211025",
  "agent_id": "relation-auditor",
  "task_id": "REL-API-FRONTEND",
  "target": {
    "kind": "relation",
    "id": "API_FRONTEND"
  },
  "status": "fail",
  "summary": "Frontend routing SSOT drifts from API contract SSOT on PageRoute usage: FE rules currently include non-contract route values as PageRoute and overgeneralize pageRoute-driven transitions.",
  "findings": [
    {
      "severity": "high",
      "code": "PAGE_ROUTE_ENUM_MISMATCH",
      "message": "`05_FRONTEND` routing rules redefine `PageRoute` with values outside the API contract (`WELCOME`, `MAIN`, `RESULT`, `MY_PAGE`), conflicting with API SSOT enum constraints.",
      "dedupe_key": "API_FRONTEND:PAGEROUTE_ENUM_MISMATCH",
      "evidence": [
        {
          "path": "05_FRONTEND/FE_ROUTING_RULES.md",
          "line": 14,
          "snippet": "Route name은 `PageRoute`와 동일한 대문자 식별자를 사용한다."
        },
        {
          "path": "05_FRONTEND/FE_ROUTING_RULES.md",
          "line": 16,
          "snippet": "예: `WELCOME`, `MAIN`, `WAITING_ROOM`, `BAN_PICK_SHOP`, `IN_GAME`, `RESULT`, `MY_PAGE`"
        },
        {
          "path": "03_API/CONTRACT/REST/CONVENTIONS.md",
          "line": 137,
          "snippet": "PageRoute 값은 다음 3개만 사용한다."
        },
        {
          "path": "03_API/CONTRACT/REST/OPENAPI.yaml.md",
          "line": 129,
          "snippet": "PageRoute enum: [WAITING_ROOM, BAN_PICK_SHOP, IN_GAME]"
        }
      ],
      "proposed_fix": "`05_FRONTEND/FE_ROUTING_RULES.md`에서 `PageRoute`를 active-game 복귀용 3개 값으로 한정하고, 일반 화면 라우트 식별자는 별도 타입(예: `AppRoute`)으로 분리해 정의한다."
    },
    {
      "severity": "medium",
      "code": "PAGE_ROUTE_SCOPE_OVERGENERALIZATION",
      "message": "Frontend routing rule states transitions are only PageRoute-based/API `pageRoute`-based, but API SSOT defines non-pageRoute transition branches (e.g., login result and signup overlay), creating ambiguous contract usage boundaries.",
      "dedupe_key": "API_FRONTEND:PAGEROUTE_SCOPE_OVERGENERALIZATION",
      "evidence": [
        {
          "path": "05_FRONTEND/FE_ROUTING_RULES.md",
          "line": 26,
          "snippet": "페이지 전환은 `PageRoute` 기준으로만 수행한다."
        },
        {
          "path": "05_FRONTEND/FE_ROUTING_RULES.md",
          "line": 27,
          "snippet": "API 응답의 `pageRoute`가 유일한 전환 기준이다."
        },
        {
          "path": "03_API/PAGE_MAP/WELCOME.md",
          "line": 24,
          "snippet": "data.result=OK -> active-game 조회 후 MAIN 또는 게임 페이지"
        },
        {
          "path": "03_API/PAGE_MAP/WELCOME.md",
          "line": 25,
          "snippet": "data.result=SIGNUP_REQUIRED -> WELCOME + SIGNUP 오버레이"
        }
      ],
      "proposed_fix": "전환 규칙을 active-game 복귀/게임 컨텍스트 전환에 한정해 `pageRoute`를 사용한다고 명시하고, 인증/가입/일반 내비게이션 전환은 PAGE_MAP 기준 별도 규칙으로 분리한다."
    }
  ],
  "metrics": {
    "files_scanned": 28,
    "links_checked": 37,
    "relations_checked": 3
  },
  "started_at": "2026-02-12T12:14:31Z",
  "finished_at": "2026-02-12T12:17:55Z"
}
